"use strict";var H={};H.type="16c";H.touch_display=false;H.vertical_layout=false;H.disp_theo_width=700;H.disp_theo_height=438;H.disp_key_offset_x=44;H.disp_key_offset_y=151;H.disp_key_width=54;H.disp_key_height=50;H.disp_key_dist_x=(606-44)/9;H.disp_key_dist_y=(364-151)/3;"use strict";H.getElem=function(a){return document.getElementById(a)};H.badnumber=function(a){return(isNaN(a)||!isFinite(a))};H.binary_sgn=function(a){return(a>=0?1:-1)};H.cl5_round=function(c,a){if(a>11){return c}var b=Math.pow(10,a);return Math.round(Math.abs(c)*b)/b*H.binary_sgn(c)};H.trim=function(a){return a.replace(/^\s+|\s+$/g,"")};H.zeropad=function(a,b){a=""+a;while(a.length<b){a="0"+a}return a};H.i18n=function(b,a,f,d){if(!d){d=3}var g=b.indexOf(".");if(g==-1&&f){b+=".";g=b.length-1}if(g!=-1&&a){b=b.slice(0,g)+","+b.slice(g+1)}if(g==-1){g=b.length}var c=a?".":",";var i=0;while(i<b.length&&isNaN(parseInt(b.charAt(i),16))){++i}for(var h=g-d;h>i;h-=d){b=b.slice(0,h)+c+b.slice(h)}return b};H.tzoffset=function(a){return a.getTimezoneOffset()*60000};H.date_check=function(c,d,b){var a=31;if(d==4||d==6||d==9||d==11){a=30}else{if(d==2){a=28;if((c%4)===0&&(((c%100)!==0)||((c%400)===0))){a=29}}}if(b<=0||b>a||c<=0||c>9999||d<=0||d>12){return 0}return 1};H.date_interpret=function(f,c){f=Math.round(Math.abs(f)*1000000);var a=Math.round(f/1000000)%100;var e=Math.round(f/10000)%100;var d=Math.round(f%10000);if(!c){var b=a;a=e;e=b}if(!H.date_check(d,e,a)){return null}return new Date(d,e-1,a,12,0,0)};H.date_diff=function(b,a){return Math.round(((a.getTime()-H.tzoffset(a))-(b.getTime()-H.tzoffset(b)))/86400000)};H.date_add=function(a,b){a.setTime(a.getTime()+Math.floor(b)*86400000)};H.date_diff30=function(h,f){var c=h.getDate();var a=f.getDate();var g=c;var e=a;if(c==31){g=30}if(a==31){if(c>=30){e=30}}var d=360*h.getFullYear()+30*(h.getMonth()+1)+g;var b=360*f.getFullYear()+30*(f.getMonth()+1)+e;return b-d};H.date_gen=function(a,b){if(b){return a.getDate()+(a.getMonth()+1)/100+a.getFullYear()/1000000}else{return(a.getMonth()+1)+a.getDate()/100+a.getFullYear()/1000000}};H.date_to_show=function(a,b){var c=a.getDay();if(c===0){c=7}return H.date_gen(a,b).toFixed(6)+"  "+c};if(!window.console){window.console={}}if(!window.console.log){window.console.log=function(a){}}H.type_cookie="hp12c";if(H.type==="12c-platinum"){H.type_cookie="hp12cpl"}else{if(H.type==="11c"){H.type_cookie="hp11c"}else{if(H.type==="15c"){H.type_cookie="hp15c"}else{if(H.type==="16c"){H.type_cookie="hp16c"}}}}H.INTERACTIVE=0;H.PROGRAMMING=1;H.RUNNING=2;H.RUNNING_STEP=3;H.FIN_N=0;H.FIN_I=1;H.FIN_PV=2;H.FIN_PMT=3;H.FIN_FV=4;H.STAT_N=1;H.STAT_X=2;H.STAT_X2=3;H.STAT_Y=4;H.STAT_Y2=5;H.STAT_XY=6;if(H.type==="11c"||H.type==="15c"){H.STAT_N=0;H.STAT_X=1;H.STAT_X2=2;H.STAT_Y=3;H.STAT_Y2=4;H.STAT_XY=5}H.STAT_MIN=H.STAT_N;H.STAT_MAX=H.STAT_XY;H.TRIGO_DEG=0;H.TRIGO_RAD=1;H.TRIGO_GRAD=2;H.NOTATION_FIX=0;H.NOTATION_SCI=1;H.NOTATION_ENG=2;H.NOTATION_INT=10;H.NOTATION_INT_DEC=H.NOTATION_INT+1;H.NOTATION_INT_HEX=H.NOTATION_INT+2;H.NOTATION_INT_OCT=H.NOTATION_INT+3;H.NOTATION_INT_BIN=H.NOTATION_INT+4;H.DEFAULT_WORDSIZE=16;H.win_digits=[];H.win_digits[H.NOTATION_INT_HEX]=8;H.win_digits[H.NOTATION_INT_OCT]=8;H.win_digits[H.NOTATION_INT_DEC]=8;H.win_digits[H.NOTATION_INT_BIN]=8;H.digit_bits=[];H.digit_bits[H.NOTATION_INT_HEX]=4;H.digit_bits[H.NOTATION_INT_OCT]=3;H.digit_bits[H.NOTATION_INT_DEC]=Math.log(10)/Math.log(2);H.digit_bits[H.NOTATION_INT_BIN]=1;H.radix=[];H.radix[H.NOTATION_INT_HEX]=16;H.radix[H.NOTATION_INT_OCT]=8;H.radix[H.NOTATION_INT_BIN]=2;H.radix[H.NOTATION_INT_DEC]=10;H.radix[H.NOTATION_FIX]=10;H.radix[H.NOTATION_SCI]=10;H.radix[H.NOTATION_ENG]=10;H.radix_suffix=[];H.radix_suffix[H.NOTATION_INT_HEX]="h";H.radix_suffix[H.NOTATION_INT_OCT]="o";H.radix_suffix[H.NOTATION_INT_DEC]="d";H.radix_suffix[H.NOTATION_INT_BIN]="b";H.value_max=9.999999*Math.pow(10,99);H.value_min=Math.pow(10,-99);H.ram_MAX=100;H.ram_ADDR_SIZE=2;H.STOP_INSTRUCTION="43.33.00";H.STOP_INSTRUCTION_IS_INVALID=false;H.INSTRUCTION_SIZE=2;H.INSTRUCTION_MAX=100;if(H.type==="12c-platinum"){H.ram_MAX=400;H.ram_ADDR_SIZE=3;H.STOP_INSTRUCTION="43.33.000"}else{if(H.type==="11c"){H.ram_MAX=203;H.ram_ADDR_SIZE=3;H.STOP_INSTRUCTION="50";H.STOP_INSTRUCTION_IS_INVALID=true}else{if(H.type==="16c"){H.ram_MAX=203;H.ram_ADDR_SIZE=3;H.STOP_INSTRUCTION="50";H.STOP_INSTRUCTION_IS_INVALID=true}else{if(H.type==="15c"){H.ram_MAX=322;H.ram_ADDR_SIZE=3;H.STOP_INSTRUCTION="50";H.STOP_INSTRUCTION_IS_INVALID=true}}}}H.MEM_MAX=20;if(H.type=="12c-platinum"){H.MEM_MAX=30}else{if(H.type=="16c"){H.MEM_MAX=100}}H.FLAGS_MAX=2;if(H.type==="16c"){H.FLAGS_MAX=6}else{if(H.type==="15c"){H.FLAGS_MAX=10}}H.FLAG_ZEROS=3;H.FLAG_CARRY=4;H.FLAG_OVERFLOW=5;H.ERROR_DIVZERO=0;H.ERROR_OVERFLOW=1;H.ERROR_STAT=2;H.ERROR_IP=4;H.ERROR_INDEX=3;H.ERROR_RTN=5;H.ERROR_FLAG=6;H.ERROR_IRR=3;H.ERROR_INTEREST=5;H.ERROR_MEMORY=6;H.ERROR_IRR2=7;H.ERROR_DATE=8;H.ERROR_IMPROPER_N=1;H.ERROR_IMPROPER_BIT=2;H.ERROR_NUMBERFORMAT=6;H.ERROR_DEFECTIVE=9;"use strict";function Hp12c_debug(a){this.memwin=null;this.format_result=a}Hp12c_debug.prototype.show_memory2=function(){if(!this.memwin||!this.memwin.document){this.memwin=null;return}var d=this.memwin.document;var c=new Date();var h=d.getElementById("tt");var g;if(h){h.innerHTML=H.type+" memory at "+c;if(H.type==="12c"||H.type==="12c-platinum"){for(g=0;g<H.machine.finmemory.length;++g){d.getElementById("finmemory"+g).innerHTML=this.format_result({r:H.machine.finmemory[g]})}}for(g=0;g<H.machine.stomemory.length;++g){var f=d.getElementById("stomemory"+g);if(!f&&g>=32){continue}f.innerHTML=this.format_result(H.machine.sto_tuple(g))}if(H.type==="12c"||H.type==="12c-platinum"){for(g=0;g<H.machine.njmemory.length;++g){d.getElementById("njmemory"+g).innerHTML=this.format_result({r:H.machine.njmemory[g]})}}d.getElementById("x").innerHTML=this.format_result(H.machine.reg_tuple("x"));d.getElementById("last_x").innerHTML=this.format_result(H.machine.reg_tuple("last_x"));d.getElementById("y").innerHTML=this.format_result(H.machine.reg_tuple("y"));d.getElementById("z").innerHTML=this.format_result(H.machine.reg_tuple("z"));d.getElementById("w").innerHTML=this.format_result(H.machine.reg_tuple("w"));for(g=0;g<H.machine.ram.length;++g){d.getElementById("ram"+g).innerHTML=H.machine.ram[g]}}var b=this;window.setTimeout(function(){b.show_memory2()},1000)};Hp12c_debug.prototype.show_memory=function(){this.memwin=window.open(H.type_cookie+"_memory.html");var b=this;window.setTimeout(function(){b.show_memory2()},1000)};"use strict";function Hp12c_dispatcher(){}var K=[];var M=[];var I;Hp12c_dispatcher.prototype.functions=K;Hp12c_dispatcher.prototype.modifier_sm=M;Hp12c_dispatcher.prototype.KEY_RS=31;Hp12c_dispatcher.prototype.KEY_SST=32;H.KEY_INDEX=Hp12c_dispatcher.prototype.KEY_INDEX=32;H.FF=Hp12c_dispatcher.prototype.KEY_FF=42;H.GG=Hp12c_dispatcher.prototype.KEY_GG=43;H.STO=Hp12c_dispatcher.prototype.KEY_STO=44;H.RCL=Hp12c_dispatcher.prototype.KEY_RCL=45;H.GTO=Hp12c_dispatcher.prototype.KEY_GTO=22;H.GSB=Hp12c_dispatcher.prototype.KEY_GSB=21;Hp12c_dispatcher.prototype.KEY_DECIMAL=48;Hp12c_dispatcher.prototype.KEY_PLUS=40;Hp12c_dispatcher.prototype.KEY_MINUS=30;Hp12c_dispatcher.prototype.KEY_MULTIPLY=20;Hp12c_dispatcher.prototype.KEY_DIVIDE=10;Hp12c_dispatcher.prototype.KEY_BACKSPACE=35;Hp12c_dispatcher.prototype.KEY_RDOWN=33;H.ENTER=36;H.STO2=H.STO*100+48;H.RCL2=H.RCL*100+48;H.GTO_MOVE=H.GTO*100+48;H.LBL=H.GG*100+22;H.FLOAT=H.FF*100+H.RCL;H.GG_CF=H.GG*100+5;H.GG_SF=H.GG*100+4;H.GG_FQUESTION=H.GG*100+6;H.WINDOW=H.FF*100+H.ENTER;H.STO_FF=H.STO*100+H.FF;H.RCL_FF=H.RCL*100+H.FF;Hp12c_dispatcher.init_vars=function(){var b=[11,12,13,14,15,16,7,8,9,10,21,22,23,24,25,26,4,5,6,20,31,32,33,34,35,36,1,2,3,30,41,42,43,44,45,0,48,49,40,50];var a=[H.FF,H.GG,H.STO,H.RCL,48,10,20,30,40,4,5,6,H.GTO,H.GSB,H.ENTER];var c;for(c=0;c<b.length;c++){K[b[c]]=[]}for(c=0;c<a.length;c++){M[a[c]]=[]}};Hp12c_dispatcher.init_vars();H.make_closure=function(d,a,c){var b=function(){H.machine[d].apply(H.machine,a)};b.closure_type="machine";b.closure_name=d;b.reducible=false;b.no_pgrm=0;b.asm=c;return b};H.make_pgrm_closure=function(d,a,c){var b=function(){H.pgrm[d].call(H.pgrm,a)};b.closure_type="pgrm";b.closure_name=d;b.no_pgrm=0;b.asm=c;return b};for(I=0;I<=16;++I){if(I==10){continue}var RI=I;if(RI>=11){RI-=1}var SI=RI.toString(16);if(I<10){K[I][H.FLOAT]=H.make_closure("set_decimals",[I,H.NOTATION_FIX],"FIX "+SI);K[I][H.WINDOW]=H.make_closure("show_window",[I],"WINDOW "+SI);K[I][H.GTO_MOVE]=H.make_closure("gto_digit_add",[RI],"GTO DIGIT ADD "+SI);K[I][H.GTO_MOVE].dont_rst_modifier=1}K[I][H.RCL]=H.make_closure("rcl",[RI],"RCL "+SI);K[I][H.RCL2]=H.make_closure("rcl",[RI+16],"RCL . "+SI);K[I][H.STO]=H.make_closure("sto",[RI],"STO "+SI);K[I][H.STO2]=H.make_closure("sto",[RI+16],"STO . "+SI);K[I][H.GTO]=H.make_pgrm_closure("gto",I,"GTO "+SI);K[I][H.GSB]=H.make_pgrm_closure("gosub",I,"GSB "+SI);K[I][H.LBL]=H.make_pgrm_closure("label",I,"LBL "+SI);K[I][H.GG_SF]=H.make_closure("sf",[RI],"SF "+SI);K[I][H.GG_CF]=H.make_closure("cf",[RI],"CF "+SI);K[I][H.GG_FQUESTION]=H.make_closure("f_question",[RI],"F? "+SI);K[I][0]=H.make_closure("digit_add",[RI],SI)}I=11;K[I][H.FF]=H.make_closure("shiftleft",[],"SL");K[I][H.GG]=H.make_closure("leftjustify",[],"LJ");I=12;K[I][H.FF]=H.make_closure("shiftright",[],"SR");K[I][H.GG]=H.make_closure("arithmeticshift",[],"ASR");I=13;K[I][H.FF]=H.make_closure("rotateleft",[],"RL");K[I][H.GG]=H.make_closure("rotateleftc",[],"RLc");I=14;K[I][H.FF]=H.make_closure("rotateright",[],"RR");K[I][H.GG]=H.make_closure("rotaterightc",[],"RRc");I=15;K[I][H.FF]=H.make_closure("rotateleftn",[],"RLn");K[I][H.GG]=H.make_closure("rotateleftcn",[],"RLcn");I=16;K[I][H.FF]=H.make_closure("rotaterightn",[],"RRn");K[I][H.GG]=H.make_closure("rotaterightcn",[],"RRcn");I=7;K[I][H.FF]=H.make_closure("maskleft",[],"MASKL");K[I][H.GG]=H.make_closure("bitcount",[],"#B");I=8;K[I][H.FF]=H.make_closure("maskright",[],"MASKR");K[I][H.GG]=H.make_closure("abs",[],"ABS");I=9;K[I][H.GG]=H.make_closure("dblr",[],"DBLR");K[I][H.FF]=H.make_closure("rmd",[],"RMD");I=10;K[I][0]=H.make_closure("divide",[],"/");K[I][H.FF]=H.make_closure("bit_xor",[],"XOR");K[I][H.GG]=H.make_closure("dbldiv",[],"DBL/");I=21;K[I][H.FF]=H.make_closure("x_exchange_index",[],"X<->(I)");K[I][H.GG]=H.make_pgrm_closure("rtn",-1,"RTN");M[I][0]=H.GSB;I=22;K[I][H.FF]=H.make_closure("x_exchange_index_itself",[],"X<->I");M[I][0]=H.GTO;M[I][H.GG]=H.LBL;I=23;K[I][H.GG]=H.make_closure("dsz",undefined,"DSZ");K[I][H.FF]=H.make_closure("show_integer_hex",[],"SHOW HEX");K[I][0]=H.make_closure("integer_hex",[],"INT HEX");I=24;K[I][H.GG]=H.make_closure("isz",undefined,"ISZ");K[I][H.FF]=H.make_closure("show_integer_dec",[],"SHOW DEC");K[I][0]=H.make_closure("integer_dec",[],"INT DEC");I=25;K[I][H.GG]=H.make_closure("sqroot",[]);K[I][H.FF]=H.make_closure("show_integer_oct",[],"SHOW OCT");K[I][0]=H.make_closure("integer_oct",[],"INT OCT");I=26;K[I][H.GG]=H.make_closure("reciprocal",[],"1/X");K[I][H.FF]=H.make_closure("show_integer_bin",[],"SHOW BIN");K[I][0]=H.make_closure("integer_bin",[],"INT BIN");I=4;K[I][H.FF]=H.make_closure("set_bit",[],"SB");M[I][H.GG]=H.GG_SF;I=5;K[I][H.FF]=H.make_closure("clr_bit",[],"CB");M[I][H.GG]=H.GG_CF;I=6;K[I][H.FF]=H.make_closure("bit_question",[],"B?");M[I][H.GG]=H.GG_FQUESTION;I=20;K[I][H.FF]=H.make_closure("bit_and",[],"AND");K[I][H.GG]=H.make_closure("dblmult",[],"DBLx");K[I][0]=H.make_closure("multiply",[],"x");I=31;K[I][0]=H.make_pgrm_closure("rs",-1,"R/S");K[I][H.RCL]=H.make_closure("rcl_index",[],"RCL (I)");K[I][H.FF]=H.make_closure("rcl_index",[],"RCL (I)");K[I][H.FF].reducible=true;K[I][H.FF].reduced_modifier=H.RCL;K[I][H.GG]=H.make_closure("prog_pr",[],"P/R");K[I][H.RCL_FF]=H.make_closure("rcl_index",[],"RCL f (I)");K[I][H.RCL_FF].reducible=true;K[I][H.RCL_FF].reduced_modifier=H.RCL;K[I][H.STO]=H.make_closure("sto_index",[],"STO (I)");K[I][H.STO_FF]=H.make_closure("sto_index",[],"STO f (I)");K[I][H.STO_FF].reducible=true;K[I][H.STO_FF].reduced_modifier=H.STO;I=32;K[I][0]=H.make_pgrm_closure("sst",-1,"SST");K[I][H.RCL]=H.make_closure("get_index",[],"RCL I");K[I][H.FF]=H.make_closure("get_index",[],"I");K[I][H.FF].reducible=true;K[I][H.FF].reduced_modifier=H.RCL;K[I][H.GG]=H.make_pgrm_closure("bst",-1,"BST");K[I][H.RCL_FF]=H.make_closure("get_index",[],"RCL f I");K[I][H.RCL_FF].reducible=true;K[I][H.RCL_FF].reduced_modifier=H.RCL;K[I][H.STO]=H.make_closure("set_index",[],"STO I");K[I][H.STO_FF]=H.make_closure("set_index",[],"STO f I");K[I][H.STO_FF].reducible=true;K[I][H.STO_FF].reduced_modifier=H.STO;K[I][H.GTO]=H.make_pgrm_closure("gto",I,"GTO (I)");K[I][H.GSB]=H.make_pgrm_closure("gosub",I,"GSB (I)");I=33;K[I][H.FF]=H.make_closure("clear_prog",[],"CLEAR PRGM");K[I][H.GG]=H.make_closure("r_up",[],"R^");K[I][0]=H.make_closure("r_down",[],"Rv");I=34;K[I][H.FF]=H.make_closure("clear_reg",[],"CLEAR REG");K[I][H.GG]=H.make_closure("pse",[],"PSE");K[I][0]=H.make_closure("x_exchange_y",[],"X<->Y");I=35;K[I][H.FF]=H.make_closure("clear_prefix",[],"CLEAR PREFIX");K[I][H.FF].no_pgrm=1;K[I][H.GG]=H.make_closure("clx",[],"CLx");K[I][0]=H.make_closure("digit_delete",[],"BSP");K[I][0].no_pgrm=1;I=36;K[I][H.GG]=H.make_closure("lstx",[1],"LSTx");K[I][0]=H.make_closure("enter",[0],"ENTER");M[I][H.FF]=H.WINDOW;I=1;K[I][H.FF]=H.make_closure("sc_cpl1",[1],"INT CPL 1");K[I][H.GG]=H.make_closure("test_x_le_y",[1],"X<=Y");I=2;K[I][H.FF]=H.make_closure("sc_cpl2",[0],"INT CPL 2");K[I][H.GG]=H.make_closure("test_x_less_0",[0],"X<0");I=3;K[I][H.FF]=H.make_closure("sc_unsigned",[],"INT UNSIGNED");K[I][H.GG]=H.make_closure("test_x_gt_y",[],"X>Y");I=30;K[I][0]=H.make_closure("minus",[],"-");K[I][H.FF]=H.make_closure("bit_not",[],"NOT");K[I][H.GG]=H.make_closure("test_x_gt_0",[],"X>0");I=41;K[I][0]=H.make_closure("toggle_decimal_and_altdisplay",[],"ON");K[I][0].no_pgrm=1;K[I][H.RCL]=H.make_closure("shv",[],"SHV");K[I][H.RCL].no_pgrm=1;K[I][H.STO]=H.make_closure("apocryphal",[1],"APOCRYPHAL 1");K[I][H.STO].no_pgrm=1;I=42;M[I][0]=H.FF;M[I][H.STO]=H.STO_FF;M[I][H.RCL]=H.RCL_FF;I=43;M[I][0]=H.GG;I=44;K[I][H.GG]=H.make_closure("move_window_l",[],"WINDOW <");K[I][H.FF]=H.make_closure("wsize",[],"WSIZE");M[I][0]=H.STO;I=45;K[I][H.GG]=H.make_closure("move_window_r",[],"WINDOW >");M[I][H.FF]=H.FLOAT;M[I][0]=H.RCL;I=0;K[I][H.FF]=H.make_closure("mem_info",[],"MEM");K[I][H.FF].no_pgrm=1;K[I][H.GG]=H.make_closure("test_x_ne_y",[],"X!=Y");I=48;K[I][H.GG]=H.make_closure("test_x_ne0",[],"X!=0");K[I][H.FF]=H.make_closure("status_16c",[0],"MEM STATUS");K[I][H.FF].no_pgrm=1;K[I][0]=H.make_closure("decimal_point_mode",[],".");K[I][H.FLOAT]=H.make_closure("set_decimals_exponential",[],"FIX .");M[I][H.STO]=H.STO2;M[I][H.RCL]=H.RCL2;M[I][H.GTO]=H.GTO_MOVE;I=49;K[I][H.GG]=H.make_closure("test_x_eq_y",[],"X=Y");K[I][H.FF]=H.make_closure("input_exponential",[],"EEX");K[I][0]=H.make_closure("chs",[],"CHS");I=40;K[I][0]=H.make_closure("plus",[],"+");K[I][H.FF]=H.make_closure("bit_or",[],"OR");K[I][H.GG]=H.make_closure("test_x_eq0",[],"X=0");I=50;K[I][0]=H.make_closure("nop",[],"NOP");Hp12c_dispatcher.prototype.handle_modifier=function(b,e){var c=this.modifier_sm[b];var d=this.find_function(b,0,1);if(c){var a=c[H.machine.modifier];if(a){H.machine.set_modifier(a);return true}else{if(c[0]&&!d){H.machine.set_modifier(c[0]);return true}}}return false};Hp12c_dispatcher.prototype.find_function=function(a,d,c){var e=this.functions[a];var b=null;if(!e){return null}b=e[H.machine.modifier];if(b){if(b.reducible){H.machine.set_modifier(b.reduced_modifier);b=e[H.machine.modifier]}}if(!b){if(c===1){return null}}if(!b){b=e[0];if(b&&c===0){H.machine.rst_modifier(1)}}if(d&&b&&b.no_pgrm){b=null}return b};Hp12c_dispatcher.prototype.dispatch=function(c){if(c==99){H.debug.show_memory();return}if(H.machine.error_in_display){H.machine.reset_error();return}else{if(H.machine.program_mode>=H.RUNNING){H.pgrm.stop();return}}var a=this.find_function(c,0,1);var d=a;var b=H.machine.modifier;if(!d){H.machine.modifier=0;d=this.find_function(c,0,1);H.machine.modifier=b}if(H.machine.program_mode==H.PROGRAMMING){H.pgrm.type(c);return}this.dispatch_common(c)};Hp12c_dispatcher.prototype.dispatch_common=function(c){var b=1;if(this.handle_modifier(c,0)){return b}var d=this.find_function(c,0,0);if(!d){d=function(){};b=false}var a=1;if(d.dont_rst_modifier){a=0}d();if(a){H.machine.rst_modifier(1)}return b};M=undefined;K=undefined;"use strict";function Hp12c_display(){this.display_max=9999999999;this.display_len=10;this.display_min=1e-10;this.lcd=[];this.contents="";this.contents_alt="";this.blink_delay=25;var j=1;var i=2;var h=4;var g=8;var f=16;var d=32;var b=64;var a=128;var k=256;this.lcdmap=[];this.lcdmap["0"]=j|i|h|f|d|b;this.lcdmap["1"]=h|d;this.lcdmap["2"]=j|h|g|f|b;this.lcdmap["3"]=j|h|g|d|b;this.lcdmap["4"]=i|h|g|d;this.lcdmap["5"]=j|i|g|d|b;this.lcdmap["6"]=j|i|g|f|d|b;this.lcdmap["7"]=j|h|d;this.lcdmap["8"]=j|i|h|g|f|d|b;this.lcdmap["9"]=j|i|h|g|d|b;this.lcdmap[" "]=0;this.lcdmap["."]=a;this.lcdmap[","]=a|k;this.lcdmap.r=j|i;this.lcdmap.U=i|h|f|d|b;this.lcdmap.u=i|h|g;this.lcdmap.n=i|h|j;this.lcdmap.i=i;this.lcdmap.g=j|i|h|g|d|b;this.lcdmap["-"]=g;this.lcdmap.A=j|i|h|g|f|d;this.lcdmap.a=this.lcdmap.A;this.lcdmap.B=i|g|f|d|b;this.lcdmap.b=this.lcdmap.B;this.lcdmap.c=g|f|b;this.lcdmap.C=this.lcdmap.c;this.lcdmap.d=h|g|f|d|b;this.lcdmap.D=this.lcdmap.d;this.lcdmap.E=j|i|g|f|b;this.lcdmap.e=this.lcdmap.E;this.lcdmap.F=j|i|g|f;this.lcdmap.f=this.lcdmap.F;this.lcdmap.H=i|h|g|f|d;this.lcdmap.h=i|g|f|d;this.lcdmap.o=g|f|d|b;this.lcdmap.O=this.lcdmap.o;this.lcdmap.R=g|f;this.lcdmap.P=j|i|h|g|f;this.lcdmap[":"]=a;for(var c=0;c<=10;++c){this.lcd[c]=[];this.lcd[c][0]=0;this.lcd[c][this.lcd[c].length]=H.getElem("lcd"+c+"a");this.lcd[c][this.lcd[c].length]=H.getElem("lcd"+c+"b");this.lcd[c][this.lcd[c].length]=H.getElem("lcd"+c+"c");this.lcd[c][this.lcd[c].length]=H.getElem("lcd"+c+"d");this.lcd[c][this.lcd[c].length]=H.getElem("lcd"+c+"e");this.lcd[c][this.lcd[c].length]=H.getElem("lcd"+c+"f");this.lcd[c][this.lcd[c].length]=H.getElem("lcd"+c+"g");this.lcd[c][this.lcd[c].length]=H.getElem("lcd"+c+"p");this.lcd[c][this.lcd[c].length]=H.getElem("lcd"+c+"t")}this.display=H.getElem("display");this.dbegin=H.getElem("begin");this.ddmyc=H.getElem("dmyc");this.dmodifier=H.getElem("modifier");this.pgrm=H.getElem("pgrm");this.rpnalg=H.getElem("rpnalg");this.trigo=H.getElem("trigo");this.user=H.getElem("user");this.carry=H.getElem("carry");this.overflow=H.getElem("overflow");this.altdisplay=H.getElem("altdisplay");this.wordstatus=H.getElem("wordstatus");this.clear()}Hp12c_display.prototype.private_show_digit=function(g,i,h){if(i>=this.lcd.length){window.console.log("Too many characters for display");return}if(!this.lcdmap[g]){g=" "}var d=this.lcdmap[g];var a=this.lcd[i];var c;var b=1;for(c=1;c<a.length;++c){a[c].style.visibility=(d&b)?"visible":((h&&a[c].style.visibility=="visible")?"visible":"hidden");b<<=1}};Hp12c_display.prototype.private_lcd_display=function(a){var b=-1;for(var d=0;d<a.length&&b<this.lcd.length;++d){var c=a.charAt(d);++b;if(c=="."||c==","){--b;this.private_show_digit(c,b,1)}else{this.private_show_digit(c,b,0)}}for(++b;b<this.lcd.length;++b){this.private_show_digit(" ",b,0)}};Hp12c_display.prototype.show=function(a){this.contents=a;this.private_lcd_display(a)};Hp12c_display.prototype.show_alt=function(a){this.contents_alt=a;if(this.altdisplay){this.altdisplay.innerHTML=a}};Hp12c_display.prototype.html_wrap=function(a){var b=0;var e;for(var d=0;d<a.length;++d){e=a.charAt(d);++b;if(b>13||(b>9&&(e==="."||e===","))){a=a.substr(0,d+1)+"<br>"+a.substr(d+1);d+=4;b=0}}return a};Hp12c_display.prototype.show_wordstatus=function(a){if(this.wordstatus){this.wordstatus.innerHTML=a}};Hp12c_display.prototype.clear=function(){for(var b=0;b<this.lcd.length;++b){for(var a=1;a<this.lcd[b].length;++a){this.lcd[b][a].style.visibility="hidden"}}this.show_alt("");this.show_wordstatus("")};Hp12c_display.prototype.format_result_tuple=function(a){if(H.machine.notation<H.NOTATION_INT){return this.format_result(a.r)}return this.format_result_int(a)};Hp12c_display.prototype.format_result=function(c){var l="";var d=Math.abs(c);var j=H.machine.decimals;var i=H.machine.decimals;var p=H.machine.notation;var k=0;var f;var b;if(c>=H.value_max){k=1;f=99;c=H.value_max;d=Math.abs(c)}else{if(c<=-H.value_max){k=2;f=99;c=-H.value_max;d=Math.abs(c)}else{if(d>=H.value_min){f=Math.log(d)/Math.log(10);f=Math.floor(f+1e-11)}else{k=3;f=-100;d=c=0}}}var o=H.machine.comma;if(p==H.NOTATION_FIX){i=6;if(d>this.display_max){p=H.NOTATION_SCI}else{if(d!==0&&f<-9){p=H.NOTATION_SCI}else{if(d!==0&&j<(-f)){j=-f}}}}i=Math.min(i,6);if(k!=3){b=c/Math.pow(10,f)}else{b=0}var q=b>=0?1:-1;b=parseFloat(Math.abs(b).toFixed(i));if(p!=H.NOTATION_FIX&&b>=10){b/=10;f+=1}b*=q;if(p==H.NOTATION_ENG&&(!k)){var g=3*Math.floor(f/3);while(f>g){b*=10;f-=1;if(i>0){i-=1}}}if(p!=H.NOTATION_FIX){if(b===0&&(H.type!=="11c"&&H.type!=="15c")&&false){return H.i18n(" 0",o,1)}else{if(k==1){return H.i18n(" 9.999999 99",o,1)}else{if(k==2){return H.i18n("-9.999999 99",o,1)}}}l=H.i18n(b.toFixed(i),o,1);if(b>=0){l=" "+l}var a=this.display_len-3+1+1;l=l.substr(0,a);while(l.length<a){l=l+" "}if(b===0){f=0}if(f<0){l=l+"-"+H.zeropad((-f).toFixed(0),2)}else{l=l+" "+H.zeropad(f.toFixed(0),2)}return l}var e=Math.max(0,j);var h=c<0?"-":" ";c=Math.abs(c);var m=c.toFixed(e).length-(e>0?1:0);if(m>this.display_len){e-=(m-this.display_len);e=Math.max(0,e)}l=H.i18n(h+c.toFixed(e),o,1);return l};Hp12c_display.prototype.get_radix=function(){var a=H.radix[H.machine.notation];var b=H.radix_suffix[H.machine.notation];return[a,b]};Hp12c_display.prototype.integer_to_string=function(b,c){var d=0;if(c===10){d=H.machine.negative_repr}var a=H.integer_to_string(b,d,H.machine.wordsize,c,true);return a};Hp12c_display.prototype.format_result_int=function(a){var b=this.get_radix()[0];return this.integer_to_string(a,b)};Hp12c_display.prototype.p_display_integer=function(m,p,q){var C=p>-100;var h="";var g="";var D=" ";var a=(H.machine.altdisplay>0);var k=this.get_radix();var f=k[1];k=k[0];var b=this.integer_to_string(m,k);var A;if(k===2){A=this.integer_to_string(m,16)}if(b.substr(0,1)==="-"){b=b.substr(1);D="-"}var o,l;var y=8;var u=H.digit_bits[H.machine.notation];var d=H.win_digits[H.machine.notation];var e=Math.ceil(H.machine.wordsize/u);var E=H.machine.window_count();var n=E*d;var j=b;var z=j.length;var r=Math.ceil(z/d);if(C){while(j.length<q){j="0"+j}}var t=C?0:H.machine.intwindow;a=a&&(r>1||t>0);var c=" ";if(H.machine.get_zeros_flag()&&k!==10){c="0"}while(j.length<e){j=c+j}while(j.length<n){j=" "+j}if(t>0){g="."}if(t<(r-1)){h="."}var i;i=(E-t-1)*d;j=j.substr(i,d);i=t*d;var w=D;if(k===10){var v=j.lastIndexOf(" ");if(v>=0){j=j.substr(0,v)+w+j.substr(v+1);w=" "}else{if(h==="."){w=" "}else{}}}var B=0;while(k===10&&((i-B)%3)>0){j+="0";B++}j=H.i18n(j,H.machine.comma,0,k===10?3:4);if(k===10&&B>0){j=j.substr(0,j.length-B)}o=w+j+" "+h+f+g;l=D+(k===2?A:b);l=H.i18n(l,H.machine.comma,0,k===10?3:4);this.show(o);if(a){this.show_alt(this.html_wrap(l))}else{this.show_alt("")}};Hp12c_display.prototype.displayNumber_now_integer=function(a){this.p_display_integer(a,-100)};Hp12c_display.prototype.displayNumber_now=function(b){if(H.type==="16c"&&H.machine.notation>=H.NOTATION_INT){this.displayNumber_now_integer(b);return}var c=H.machine.comma;b=b.r;if(isNaN(b)){b=0}else{if(b>H.value_max){b=H.value_max}else{if(b<-H.value_max){b=-H.value_max}else{if(Math.abs(b)<H.value_min){b=0}}}}var a=this.format_result(b);this.show(a);this.show_alt("")};Hp12c_display.prototype.displayNumber=function(b){H.machine.cli("display");this.show("");var c=this;window.setTimeout(function(){H.machine.sti("display");c.displayNumber_now(b)},this.blink_delay)};Hp12c_display.prototype.displayTypedNumber_integer=function(c,a,b){this.p_display_integer(c,a,b)};Hp12c_display.prototype.displayTypedNumber=function(a,c,d,e,j,b){var k="";var h=H.machine.comma;if(b===0){if(c.length<=0){k=" 0"}else{k=(a<0?"-":" ")+c}if(H.type!=="11c"&&H.type!=="15c"){k+="."}k=H.i18n(k,h,0)}else{if(b===1){k=H.i18n((a<0?"-":" ")+c+"."+d,h,1)}else{if(b===100){var g=d.substr(0,7-c.length);k=H.i18n((a<0?"-":" ")+c+"."+g,h,1);for(var f=0;f<(7-g.length-c.length);++f){k+=" "}k+=j<0?"-":" ";k+=H.zeropad(parseInt("0"+e,10).toFixed(0),2)}}}this.show(k);this.show_alt("")};H.mod_stt=null;Hp12c_display.prototype.modifier_table=function(){if(H.mod_stt){return H.mod_stt}var b=[];b[0]="";b[H.FF]="f";b[H.GG]="g";b[H.STO]="STO";b[H.STO2]="STO★";b[H.RCL]="RCL";b[H.RCL2]="RCL★";if(H.type!=="16c"){b[H.STO_PLUS]="STO+";b[H.STO_MINUS]="STO-";b[H.STO_TIMES]="STO×";b[H.STO_DIVIDE]="STO÷"}b[H.GTO]="GTO";b[H.GTO_MOVE]="GTO★";if(H.type==="12c"||H.type==="12c-platinum"){b[H.RCL_GG]="RCL g"}else{if(H.type==="11c"||H.type==="15c"){b[H.HYP]="HYP";b[H.HYPINV]="HYPINV";b[H.LBL]="f LBL";b[H.GSB]="GSB";b[H.FIX]="f FIX";b[H.SCI]="f SCI";b[H.ENG]="f ENG";b[H.STO_FF]="STO f";b[H.RCL_FF]="RCL f";b[H.GG_SF]="g SF";b[H.GG_CF]="g CF";b[H.GG_FQUESTION]="g F?";b[H.STO_PLUS_FF]="STO+,f";b[H.STO_MINUS_FF]="STO-,f";b[H.STO_TIMES_FF]="STO×,f";b[H.STO_DIVIDE_FF]="STO÷,f"}else{if(H.type==="16c"){b[H.LBL]="g LBL";b[H.GSB]="GSB";b[H.GG_SF]="g SF";b[H.GG_CF]="g CF";b[H.GG_FQUESTION]="g F?";b[H.STO_FF]="STO f";b[H.RCL_FF]="RCL f";b[H.WINDOW]="WINDOW";b[H.FLOAT]="FLOAT"}}}H.mod_stt=b;return H.mod_stt};Hp12c_display.prototype.show_modifier=function(b){var a=this.modifier_table()[b];if(a===undefined||a===null){console.log("Unknown modifier "+b);a=""}if(this.dmodifier){this.dmodifier.innerHTML=a}};Hp12c_display.prototype.show_begin=function(b){var a="";if(b){a="BEGIN"}if(this.dbegin){this.dbegin.innerHTML=a}};Hp12c_display.prototype.show_carry=function(b){var a="";if(b){a="C"}if(H.type==="16c"&&this.carry){this.carry.innerHTML=a}};Hp12c_display.prototype.show_overflow=function(b){var a="";if(b){a="G"}if(H.type==="16c"&&this.overflow){this.overflow.innerHTML=a}};Hp12c_display.prototype.show_error=function(a){this.show("ERROR "+a);this.show_alt("")};Hp12c_display.prototype.display_meminfo=function(c,b){--b;var a=b.toFixed(0);if(H.type!=="16c"){a=(b%10).toFixed(0);if(b>=10){a=":"+a}}this.show("P-"+H.zeropad(c,H.ram_ADDR_SIZE)+" R-"+a);this.show_alt("")};Hp12c_display.prototype.show_dmyc=function(b,c){var a="";if(b){a+="D.MY"}if(c){a+="&nbsp;&nbsp;C"}if(this.ddmyc){this.ddmyc.innerHTML=a}};Hp12c_display.prototype.show_pse=function(){if(this.dmodifier){this.dmodifier.innerHTML="PAUSE"}};Hp12c_display.prototype.show_pgrm=function(d,c,b){var a="";if(d){a="PRGM"}else{if(c){a="RUN "+H.zeropad(b.toFixed(0),2)}}if(this.pgrm){this.pgrm.innerHTML=a}};Hp12c_display.prototype.show_algmode=function(b){if(this.rpnalg&&H.type==="12c-platinum"){var a=["RPN","ALG"][b];this.rpnalg.innerHTML=a}};Hp12c_display.prototype.show_trigo=function(b){if(H.type==="11c"||H.type==="15c"){var a=["","RAD","GRAD"][b];if(this.trigo){this.trigo.innerHTML=a}}};Hp12c_display.prototype.show_user=function(b){if(H.type==="11c"||H.type==="15c"){var a=["","USER"][b];if(this.user){this.user.innerHTML=a}}};"use strict";function Hp12c_keyboard(){this.is_enabled=0;this.kbdtable={};this.kbdtable["0"]=0;this.kbdtable["."]=48;this.kbdtable[","]=48;this.kbdtable["1"]=1;this.kbdtable["2"]=2;this.kbdtable["3"]=3;this.kbdtable["4"]=4;this.kbdtable["5"]=5;this.kbdtable["6"]=6;this.kbdtable["7"]=7;this.kbdtable["8"]=8;this.kbdtable["9"]=9;this.kbdtable["+"]=40;this.kbdtable["="]=40;this.kbdtable["-"]=30;this.kbdtable["*"]=20;this.kbdtable.x=20;this.kbdtable.X=20;this.kbdtable["/"]=10;this.kbdtable[":"]=10;this.kbdtable["\r"]=36;this.kbdtable["\n"]=36;this.kbdtable[" "]=36;this.kbdtable.f=42;this.kbdtable.F=42;this.kbdtable.g=43;this.kbdtable.G=43;this.kbdtable.s=44;this.kbdtable.S=44;this.kbdtable.r=45;this.kbdtable.R=45;this.kbdtable.o=41;this.kbdtable.O=41;H.hp1xc_keyboard_flavor(this.kbdtable);this.vertical_map={};this.vertical_map[0]=-1;this.vertical_map[1]=11;this.vertical_map[2]=12;this.vertical_map[3]=13;this.vertical_map[4]=14;this.vertical_map[5]=15;this.vertical_map[10]=-1;this.vertical_map[11]=21;this.vertical_map[12]=22;this.vertical_map[13]=23;this.vertical_map[14]=24;this.vertical_map[15]=25;this.vertical_map[20]=41;this.vertical_map[21]=31;this.vertical_map[22]=32;this.vertical_map[23]=33;this.vertical_map[24]=34;this.vertical_map[25]=35;this.vertical_map[30]=45;this.vertical_map[31]=16;this.vertical_map[32]=7;this.vertical_map[33]=8;this.vertical_map[34]=9;this.vertical_map[35]=10;this.vertical_map[40]=44;this.vertical_map[41]=26;this.vertical_map[42]=4;this.vertical_map[43]=5;this.vertical_map[44]=6;this.vertical_map[45]=20;this.vertical_map[50]=43;this.vertical_map[51]=36;this.vertical_map[52]=1;this.vertical_map[53]=2;this.vertical_map[54]=3;this.vertical_map[55]=30;this.vertical_map[60]=42;this.vertical_map[61]=36;this.vertical_map[62]=0;this.vertical_map[63]=48;this.vertical_map[64]=49;this.vertical_map[65]=40;this.pointer_div=H.getElem("pointer_div");this.kx=parseInt(this.pointer_div.style.width,10)/H.disp_theo_width;this.ky=parseInt(this.pointer_div.style.height,10)/H.disp_theo_height;this.xoff=H.disp_key_offset_x*this.kx;this.yoff=H.disp_key_offset_y*this.ky;this.xl=H.disp_key_width*this.kx;this.yl=H.disp_key_height*this.ky;this.xd=H.disp_key_dist_x*this.kx;this.yd=H.disp_key_dist_y*this.ky;this.microsoft=(window.navigator&&window.navigator.msPointerEnabled&&true);var b=this;if(H.touch_display){if(this.microsoft){var a=function(c){b.mouse_click(c)};window.cross.addEventListener("MSPointerDown",a,true)}else{H.getElem("cross").ontouchstart=function(c){b.mouse_click(c)}}}else{H.getElem("cross").onclick=function(c){b.mouse_click(c)}}document.onkeypress=function(c){b.hard_keyboard(c)}}Hp12c_keyboard.prototype.enable=function(){this.is_enabled=1};Hp12c_keyboard.prototype.disable=function(){this.is_enabled=0};Hp12c_keyboard.prototype.enabled=function(){return this.is_enabled};Hp12c_keyboard.prototype.remap_key_vertical=function(a){var b=this.vertical_map[a];if(b===undefined||b===null){b=-1}return b};Hp12c_keyboard.prototype.remap_key=function(b){var c=b+11;var a=(c%10);if(a===0){c-=10}var d=Math.floor(c/10);if(c==47){c=0}else{if(a>=7&&a<=9&&c!=48&&c!=49){c=a-3*(d-1)}}if(c==46){c=36}return c};Hp12c_keyboard.prototype.hard_keyboard=function(c){var f;var d;var b;if(window.event){c=window.event;f=window.event.keyCode}else{if(c.which){f=c.which}else{return true}}d=String.fromCharCode(f);var a=this.kbdtable[d];if(a!==undefined&&a!==null){if(this.enabled()){H.dispatcher.dispatch(this.kbdtable[d])}c.returnValue=false;if(c.preventDefault){c.preventDefault()}return false}return true};Hp12c_keyboard.prototype.mouse_click=function(b){if(!b){b=window.event}var d,c;if(H.touch_display){b.preventDefault();if(this.microsoft){d=(b.pageX-this.pointer_div.offsetLeft)-this.xoff;c=(b.pageY-this.pointer_div.offsetTop)-this.yoff}else{d=(b.targetTouches[0].pageX-this.pointer_div.offsetLeft)-this.xoff;c=(b.targetTouches[0].pageY-this.pointer_div.offsetTop)-this.yoff}}else{d=(b.offsetX?b.offsetX:(b.pageX-this.pointer_div.offsetLeft))-this.xoff;c=(b.offsetY?b.offsetY:(b.pageY-this.pointer_div.offsetTop))-this.yoff}var e;var a;if(H.vertical_layout){if(d<0||c<0||d>=this.xd*6||c>=this.yd*7){return}e=Math.floor(d/this.xd)+10*Math.floor(c/this.yd);while(d>this.xd){d-=this.xd}while(c>this.yd){c-=this.yd}a=(d<this.xl)&&((c<this.yl)||e==51);if(a){e=this.remap_key_vertical(e);if(e>=0){if(this.enabled()){H.dispatcher.dispatch(e)}}}}else{if(d<0||c<0||d>=this.xd*10||c>=this.yd*4){return}e=Math.floor(d/this.xd)+10*Math.floor(c/this.yd);while(d>this.xd){d-=this.xd}while(c>this.yd){c-=this.yd}a=(d<this.xl)&&((c<this.yl)||e==25);if(a){if(this.enabled()){H.dispatcher.dispatch(this.remap_key(e))}}}};"use strict";H.hp1xc_keyboard_flavor=function(a){a.a=11;a.A=11;a.b=12;a.B=12;a.c=13;a.C=13;a.d=14;a.D=14;a.e=15;a.E=15;a.f=16;a.F=16;a.m=42;a.M=42;a.h=49;a.H=49;a.t=22;a.T=22;a.u=21;a.U=21;a.n=33;a.N=33;a[String.fromCharCode(40)]=33;a.Z=35;a.z=35;a[String.fromCharCode(8)]=35;a["?"]=99;a["["]=31;a["]"]=32;a.y=34;a.Y=34;a.i=23;a.I=23;a.j=24;a.J=24;a.k=25;a.K=25;a.l=26;a.L=26};"use strict";function Hp12c_machine(){this.ALG_PLUS=1;this.ALG_MINUS=2;this.ALG_MULTIPLY=3;this.ALG_DIVIDE=4;this.ALG_POWER=5;this.nvname=H.type_cookie;this.sti_level=0;this.init_memory()}Hp12c_machine.prototype.init_memory=function(b){this.x=0;this.y=0;this.z=0;this.w=0;this.last_x=0;this.alg_op=0;this.xi=0;this.yi=0;this.zi=0;this.wi=0;this.last_xi=0;this.matrixmem=[];this.xh=0;this.yh=0;this.zh=0;this.wh=0;this.last_xh=0;this.stomemoryh=[];this.wordsize=H.DEFAULT_WORDSIZE;this.intwindow=0;this.negative_repr=2;this.stomemory=[];this.finmemory=[];this.njmemory=[];this.index=0;this.ram=[];this.program_size=1;this.flags=[];var a;for(a=0;a<H.FLAGS_MAX;++a){this.flags[a]=0}this.decimals=2;this.comma=0;this.altdisplay=1;this.begin=0;this.dmy=0;this.compoundf=0;this.notation=H.NOTATION_FIX;if(H.type==="16c"){this.notation=H.NOTATION_INT_HEX}this.trigo=H.TRIGO_DEG;this.complex=0;this.user=0;this.prng=new H.Prng(1);this.algmode=0;this.program_mode=0;this.ip=0;this.pushed=0;this.gtoxx="";this.modifier=0;this.do_fincalc=0;this.xmode=-1;this.typed_mantissa="";this.typed_decimals="";this.typed_mantissa_signal=1;this.typed_exponent="00";this.typed_exponent_signal=1;this.error_in_display=0;this.call_stack=[];if(H.type==="11c"){this.nvN=["x","y","z","w","last_x","decimals","comma","index","trigo","user","notation"];this.nvAN=["stomemory","flags"]}else{if(H.type==="15c"){this.nvN=["x","y","z","w","last_x","xi","yi","zi","wi","last_xi","decimals","comma","index","trigo","user","notation","complex"];this.nvAN=["stomemory","matrixmem","flags"]}else{if(H.type==="16c"){this.nvN=["x","y","z","w","last_x","xh","yh","zh","wh","last_xh","decimals","comma","index","notation","wordsize","intwindow","negative_repr","altdisplay"];this.nvAN=["stomemory","stomemoryh","flags"]}else{this.nvN=["x","y","z","w","last_x","alg_op","algmode","decimals","comma","begin","dmy","compoundf","notation"];this.nvAN=["stomemory","finmemory","njmemory"]}}}this.nvAX=["ram"]};Hp12c_machine.prototype.check_reg=function(a){if(a!=="x"&&a!=="y"&&a!=="z"&&a!=="w"&&a!=="last_x"){console.log("Bad register name");return false}return true};Hp12c_machine.prototype.sto_Reset=function(a){this.stomemory[a]=0;this.stomemoryh[a]=0};Hp12c_machine.prototype.reg_Reset=function(a){if(!this.check_reg(a)){return}this[a]=0;this[a+"h"]=0;this[a+"i"]=0};Hp12c_machine.prototype.sto_Swap_reg=function(a,d){if(!this.check_reg(d)){return}var c={r:this.stomemory[a],h:this.stomemoryh[a]};var b={r:this[d],h:this[d+"h"]};if(this.notation>=H.NOTATION_INT){this.cast_wordsize(c);this.cast_wordsize(b)}this.stomemory[a]=b.r;this.stomemoryh[a]=b.h;this[d]=c.r;this[d+"h"]=c.h};Hp12c_machine.prototype.sto_To_reg=function(b,c){if(!this.check_reg(c)){return}var a={r:this.stomemory[b],h:this.stomemoryh[b]};if(this.notation>=H.NOTATION_INT){this.cast_wordsize(a)}this[c]=a.r;this[c+"h"]=a.h};Hp12c_machine.prototype.reg_To_sto=function(c,b){if(!this.check_reg(c)){return}var a={r:this[c],h:this[c+"h"]};if(this.notation>=H.NOTATION_INT){this.cast_wordsize(a)}this.stomemory[b]=a.r;this.stomemoryh[b]=a.h};Hp12c_machine.prototype.reg_To_reg=function(c,b){if(!this.check_reg(c)||!this.check_reg(b)){return}var a={r:this[c],h:this[c+"h"],i:this[c+"i"]};if(this.notation>=H.NOTATION_INT){this.cast_wordsize(a)}this[b]=a.r;this[b+"h"]=a.h;this[b+"i"]=a.i};Hp12c_machine.prototype.reg_tuple=function(b){if(!this.check_reg(b)){return null}var a={};a.r=this[b];a.i=this[b+"i"];a.h=this[b+"h"];if(this.notation>=H.NOTATION_INT){this.cast_wordsize(a)}return a};Hp12c_machine.prototype.reg_real=function(a){if(!this.check_reg(a)){return null}return this.reg_tuple(a).r};Hp12c_machine.prototype.cast_wordsize=function(a){H.cast_wordsize(a,this.wordsize)};Hp12c_machine.prototype.cast_wordsize_in_accumulators=function(){var b;var a=["x","y","z","w","last_x"];for(b=0;b<a.length;++b){this.reg_Set_tuple(a[b],this.reg_tuple(a[b]))}};Hp12c_machine.prototype.reg_Set_tuple=function(b,a){if(!this.check_reg(b)){return}if(this.notation>=H.NOTATION_INT){this.cast_wordsize(a)}this[b]=a.r;this[b+"i"]=a.i;this[b+"h"]=a.h};Hp12c_machine.prototype.reg_Set_real=function(b,a){if(!this.check_reg(b)){return null}return this.reg_Set_tuple(b,{r:a,i:0,h:0})};Hp12c_machine.prototype.sto_tuple=function(b){var a={};a.r=this.stomemory[b];a.h=this.stomemoryh[b];a.i=0;if(this.notation>=H.NOTATION_INT){this.cast_wordsize(a)}return a};Hp12c_machine.prototype.sto_Set_tuple=function(b,a){if(this.notation>=H.NOTATION_INT){this.cast_wordsize(a)}this.stomemory[b]=a.r;this.stomemoryh[b]=a.h};Hp12c_machine.prototype.sto_mem_ref=function(){return this.stomemory};Hp12c_machine.prototype.sto_mem_len=function(){return this.stomemory.length};Hp12c_machine.prototype.program_limit=function(){if(H.type==="11c"||H.type==="15c"||H.type==="16c"){return Math.min(H.ram_MAX-1,this.program_size-1)}return H.ram_MAX-1};Hp12c_machine.prototype.ram_available=function(){if(H.type==="11c"||H.type==="15c"||H.type==="16c"){return Math.min(H.ram_MAX-this.program_size)}return H.ram_MAX-1};Hp12c_machine.prototype.incr_ip=function(a){this.ip+=a;if(this.ip<0||this.ip>this.program_limit()){this.ip=0}};Hp12c_machine.prototype.init=function(){this.init_memory();this.clear_prog(1);this.clear_reg();this.clear_stack();this.error_in_display=0};Hp12c_machine.prototype.clear_fin=function(){for(var a=0;a<5;++a){this.finmemory[a]=0}this.display_result()};Hp12c_machine.prototype.clear_statistics=function(){for(var a=H.STAT_MIN;a<=H.STAT_MAX;++a){this.sto_Reset(a)}this.reg_Reset("x");this.reg_Reset("y");this.reg_Reset("z");this.reg_Reset("w");this.display_result()};Hp12c_machine.prototype.clear_prog=function(a){if(a){this.ram[0]="";for(var b=1;b<H.ram_MAX;++b){this.ram[b]=H.STOP_INSTRUCTION}this.program_size=1}else{this.display_result()}this.ip=0};Hp12c_machine.prototype.clear_sto=function(){for(var a=0;a<H.MEM_MAX;++a){this.sto_Reset(a);this.njmemory[a]=1}};Hp12c_machine.prototype.cli=function(a){this.sti_level--;if(this.sti_level===0){H.keyboard.disable()}};Hp12c_machine.prototype.sti=function(a){this.sti_level++;if(this.sti_level===1){H.keyboard.enable()}};Hp12c_machine.prototype.clear_typing=function(){this.xmode=-1;this.typed_mantissa="";this.typed_decimals="";this.typed_mantissa_signal=1;this.typed_exponent="00";this.typed_exponent_signal=1};Hp12c_machine.prototype.display_result=function(){this.display_result_s(true,true)};Hp12c_machine.prototype.display_result_s=function(a,b){if(H.type==="16c"){if(a){this.intwindow=0}}if(b){this.pushed=0}this.clear_typing();H.display.displayNumber(this.reg_tuple("x"))};Hp12c_machine.prototype.display_all=function(){H.display.displayNumber(this.reg_tuple("x"));this.display_modifier();this.display_begin();this.display_dmyc();this.display_pgrm();this.display_algmode();this.display_trigo();this.display_user();this.display_flags();this.display_wordstatus()};Hp12c_machine.prototype.pse=function(){this.cli("pse");var b=this;window.setTimeout(function(){H.display.show_pse()},0);window.setTimeout(function(){b.sti("pse");b.display_modifier();b.display_result_s(false,false)},1000)};Hp12c_machine.prototype.toggle_decimal_character=function(){this.comma=this.comma?0:1;this.display_result();H.storage.save();console.log("Storage saved")};Hp12c_machine.prototype.toggle_decimal_and_altdisplay=function(){if(this.altdisplay){this.altdisplay=0;this.display_result_s(false,false);this.display_wordstatus();H.storage.save()}else{this.altdisplay=1;this.display_wordstatus();this.toggle_decimal_character()}};Hp12c_machine.prototype.display_result_date=function(a){this.clear_typing();H.display.show(H.date_to_show(a,this.dmy))};Hp12c_machine.prototype.clear_stack=function(){this.reg_Reset("x");this.reg_Reset("y");this.reg_Reset("z");this.reg_Reset("w");this.reg_Reset("last_x")};Hp12c_machine.prototype.clear_reg=function(){if(H.type!=="11c"&&H.type!=="15c"&&H.type!=="16c"){this.clear_stack()}this.alg_op=0;this.index=0;this.clear_fin();this.clear_sto();this.display_result_s(false,false)};Hp12c_machine.prototype.display_pgrm=function(){H.display.show_pgrm(this.program_mode==H.PROGRAMMING,this.program_mode>=H.RUNNING,this.ip)};Hp12c_machine.prototype.display_trigo=function(){H.display.show_trigo(this.trigo)};Hp12c_machine.prototype.display_user=function(){H.display.show_user(this.user)};Hp12c_machine.prototype.display_algmode=function(){H.display.show_algmode(this.algmode)};Hp12c_machine.prototype.display_error=function(a){H.display.show_error(a);this.clear_typing();this.error_in_display=1;if(this.program_mode>=H.RUNNING){H.pgrm.stop()}};Hp12c_machine.prototype.reset_error=function(){this.error_in_display=0;if(this.program_mode==H.INTERACTIVE){this.display_result_s(false,false)}else{if(this.program_mode==H.PROGRAMMING){this.display_program_opcode()}}};Hp12c_machine.prototype.display_modifier2=function(a){H.display.show_modifier(a)};Hp12c_machine.prototype.display_modifier=function(){this.display_modifier2(this.modifier)};Hp12c_machine.prototype.display_begin=function(){H.display.show_begin(this.begin)};Hp12c_machine.prototype.display_carry=function(){if(H.type==="16c"){H.display.show_carry(this.flags[H.FLAG_CARRY])}};Hp12c_machine.prototype.display_overflow=function(){if(H.type==="16c"){H.display.show_overflow(this.flags[H.FLAG_OVERFLOW])}};Hp12c_machine.prototype.display_wordstatus=function(){if(H.type==="16c"){var a="";if(this.notation>=H.NOTATION_INT&&this.altdisplay){a=""+this.wordsize+",";if(this.negative_repr){a+=this.negative_repr}else{a+="u"}a+="<br>w="+this.intwindow}H.display.show_wordstatus(a)}};Hp12c_machine.prototype.display_flags=function(){this.display_carry();this.display_overflow()};Hp12c_machine.prototype.display_dmyc=function(){H.display.show_dmyc(this.dmy,this.compoundf)};Hp12c_machine.prototype.set_dmy=function(a){this.dmy=a;this.display_dmyc();this.display_result()};Hp12c_machine.prototype.set_trigo=function(a){this.trigo=a;this.display_trigo();this.display_result()};Hp12c_machine.prototype.rpn_mode=function(){this.algmode=0;this.alg_op=0;this.display_algmode();this.display_result()};Hp12c_machine.prototype.algebraic_mode=function(){this.algmode=1;this.alg_op=0;this.display_algmode();this.display_result()};Hp12c_machine.prototype.toggle_compoundf=function(){this.compoundf=this.compoundf?0:1;this.display_dmyc();this.display_result()};Hp12c_machine.prototype.toggle_user=function(){this.user=this.user?0:1;this.display_user();if(this.program_mode==H.INTERACTIVE){this.display_result()}};Hp12c_machine.prototype.set_begin=function(a){this.begin=a;this.display_begin();this.display_result()};Hp12c_machine.prototype.set_modifier=function(a){this.modifier=a;if(a==H.GTO||a==H.GTO_MOVE){this.gto_buf_clear()}this.display_modifier()};Hp12c_machine.prototype.set_decimals=function(c,b){var a=false;if(this.notation>=H.NOTATION_INT){this.prepare_for_float_mode();this.enable_push=true}this.notation=b;this.decimals=c;this.display_wordstatus();this.display_result_s(true,a)};Hp12c_machine.prototype.set_decimals_index=function(a){};Hp12c_machine.prototype.set_decimals_exponential=function(){if(this.notation>=H.NOTATION_INT){this.prepare_for_float_mode();this.intwindow=0}this.notation=H.NOTATION_SCI;this.decimals=10;this.display_wordstatus();this.display_result()};Hp12c_machine.prototype.rst_modifier=function(a){if(a){this.do_fincalc=0}this.modifier=0;this.display_modifier()};Hp12c_machine.prototype.push=function(){this.reg_To_reg("z","w");this.reg_To_reg("y","z");this.reg_To_reg("x","y");this.pushed=1};Hp12c_machine.prototype.digit_add_chk_int=function(d,c){var b=H.digit_bits[this.notation];var a=Math.ceil(this.wordsize/b);if(c.length>=a){d=null}if(d!==null){d=d.toString(16)}return d};Hp12c_machine.prototype.chk_int_overflow=function(h){var g=H.digit_bits[this.notation];var a=this.wordsize/g;var f=Math.ceil(a);var d=Math.floor(a);if((h.length>=f)&&(f!==d)){var e=H.radix[this.notation];var c=H.string_to_integer(h,this.negative_repr,this.wordsize,e);var b=H.string_to_integer(h,this.negative_repr,this.wordsize+g,e);if(c.r!==b.r||c.h!==b.h){h="0"+h.substr(1)}}return h};Hp12c_machine.prototype.digit_add=function(b){var a=H.radix[this.notation];if(!a){a=10}if(b>=a){return}if(this.xmode==-1){if(this.notation>=H.NOTATION_INT){b=this.digit_add_chk_int(b,this.typed_mantissa)}if(b!==null){if(!this.pushed){this.push()}this.clear_typing();this.typed_mantissa=this.chk_int_overflow(""+b);this.xmode=0}}else{if(this.xmode===0){if(this.notation>=H.NOTATION_INT){b=this.digit_add_chk_int(b,this.typed_mantissa);if(b!==null){this.typed_mantissa=this.chk_int_overflow(this.typed_mantissa+""+b)}}else{if(this.typed_mantissa.length<H.display.display_len){this.typed_mantissa+=""+b}}}else{if(this.xmode===1){if((this.typed_mantissa.length+this.typed_decimals.length)<H.display.display_len){this.typed_decimals+=""+b}}else{if(this.xmode===100){this.typed_exponent=this.typed_exponent.substr(1,1);this.typed_exponent+=""+b}}}}this.display_typing()};Hp12c_machine.prototype.display_typing_integer=function(){var a=H.string_to_integer(this.typed_mantissa,this.negative_repr,this.wordsize,H.radix[this.notation]);this.reg_Set_tuple("x",a);H.display.displayTypedNumber_integer(this.reg_tuple("x"),this.xmode,this.typed_mantissa.length)};Hp12c_machine.prototype.display_typing=function(){if(H.type==="16c"&&this.notation>=H.NOTATION_INT){this.display_typing_integer();return}var a=this.typed_mantissa_signal*parseFloat(this.typed_mantissa+"."+this.typed_decimals+"0")*Math.pow(10,parseInt("0"+this.typed_exponent,10)*this.typed_exponent_signal);this.reg_Set_real("x",a);H.display.displayTypedNumber(this.typed_mantissa_signal,this.typed_mantissa,this.typed_decimals,this.typed_exponent,this.typed_exponent_signal,this.xmode)};Hp12c_machine.prototype.digit_delete=function(){var a;var b;if(this.xmode==-1){if(H.type==="11c"||H.type==="15c"||H.type==="16c"){this.reg_Set_tuple("x",{r:0,h:0,i:0});this.pushed=1;H.display.displayNumber(this.reg_tuple("x"))}else{}return}if(this.xmode===0){b=this.typed_mantissa.length-1;if(b>=0){this.typed_mantissa=this.typed_mantissa.substr(0,b)}}else{if(this.xmode===1){b=this.typed_decimals.length-1;if(b<0){this.xmode=0}else{this.typed_decimals=this.typed_decimals.substr(0,b)}}else{if(this.xmode===100){this.typed_exponent="";if(this.typed_decimals.length>0){this.xmode=1}else{this.xmode=0}}}}this.display_typing()};Hp12c_machine.prototype.input_exponential=function(){if(this.notation>=H.NOTATION_INT){return}if(this.xmode==-1){if(!this.pushed){this.push()}this.clear_typing();this.typed_mantissa="1"}else{if(this.xmode!=100){if(this.typed_mantissa.length>(H.display.display_len-3)){return}if(parseInt("0"+this.typed_mantissa,10)===0){this.typed_mantissa="0";var c=parseInt("0"+this.typed_decimals,10);if(c===0){this.typed_mantissa="1"}else{var a=c.toFixed(0);var b=this.typed_decimals.length-(""+a).length;b=Math.max(0,b);if((this.typed_mantissa.length+b)>=(H.display.display_len-3)){return}}}}}this.xmode=100;this.display_typing()};Hp12c_machine.prototype.decimal_point_mode=function(){if(this.notation>=H.NOTATION_INT){return}if(this.xmode==-1){if(!this.pushed){this.push()}this.clear_typing()}if(this.typed_mantissa.length<=0){this.typed_mantissa="0"}this.xmode=1;this.display_typing()};Hp12c_machine.prototype.chs_integer=function(){this.save_lastx();var a=this.reg_tuple("x");var b=H.integer_inv([a.h,a.r],this.negative_repr,this.wordsize);this.reg_Set_tuple("x",b.result);this.set_overflow(b.overflow);this.display_result()};Hp12c_machine.prototype.chs=function(){if(this.notation>=H.NOTATION_INT){this.chs_integer();return}if(this.xmode===-1){this.reg_Set_real("x",-this.reg_real("x"));this.display_result();return}if(this.xmode==100){this.typed_exponent_signal*=-1}else{this.typed_mantissa_signal*=-1}this.display_typing()};Hp12c_machine.prototype.pop=function(){this.reg_To_reg("y","x");this.reg_To_reg("z","y");this.reg_To_reg("w","z")};Hp12c_machine.prototype.save_lastx=function(){if(!this.algmode){this.reg_To_reg("x","last_x")}};Hp12c_machine.prototype.lstx=function(){this.push();this.reg_To_reg("last_x","x");this.display_result()};Hp12c_machine.prototype.shv=function(){this.push();if(this.notation>=H.NOTATION_INT){this.reg_Set_real("x",H.sve*10)}else{this.reg_Set_real("x",H.sve)}this.display_result()};Hp12c_machine.prototype.apocryphal=function(a){this.push();this.reg_Set_real("x",140+a);this.display_result()};Hp12c_machine.prototype.clear_prefix=function(){if(this.notation>=H.NOTATION_INT){return}var c=Math.abs(this.reg_real("x"));var a=Math.log(c)/Math.log(10);if(H.badnumber(a)){a=1}if(a==Math.floor(a)){a+=0.1}c=c*Math.pow(10,H.display.display_len-Math.ceil(a));this.cli("clear_prefix");H.display.show(H.zeropad(c.toFixed(0),H.display.display_len));var b=this;window.setTimeout(function(){b.sti("clear_prefix");b.display_result_s(false,false)},1000)};Hp12c_machine.prototype.x_exchange_y=function(){var a=this.reg_tuple("x");this.reg_To_reg("y","x");this.reg_Set_tuple("y",a);this.display_result()};Hp12c_machine.prototype.fix_index=function(){var a=Math.floor(Math.abs(this.index));if(a>=H.MEM_MAX){this.display_error(H.ERROR_INDEX);return null}return a};Hp12c_machine.prototype.x_exchange_index=function(){var a=this.fix_index();if(a===null){return}this.sto_Swap_reg(a,"x");this.display_result()};Hp12c_machine.prototype.x_exchange_index_itself=function(){var a=this.reg_real("x");this.reg_Set_real("x",this.index);this.index=a;this.display_result()};Hp12c_machine.prototype.mem_info=function(){H.display.display_meminfo(this.ram_available(),this.sto_mem_len());this.error_in_display=1};Hp12c_machine.prototype.sf=function(a){if(a>=this.flags.length){this.display_error(H.ERROR_FLAG);return}this.do_sf(a);this.display_result()};Hp12c_machine.prototype.do_sf=function(a){this.flags[a]=1;this.display_flags()};Hp12c_machine.prototype.cf=function(a){if(a>=this.flags.length){this.display_error(H.ERROR_FLAG);return}this.do_cf(a);this.display_result()};Hp12c_machine.prototype.do_cf=function(a){this.flags[a]=0;this.display_flags()};Hp12c_machine.prototype.f_question=function(a){if(a>=this.flags.length){this.display_error(H.ERROR_FLAG);return}this.incr_ip(this.flags[a]?0:1)};Hp12c_machine.prototype.dissect_index=function(){var d=H.binary_sgn(this.index);var b=H.cl5_round(Math.abs(this.index),5);var a=Math.floor(b)*d;b-=d*a;b*=1000;var c=Math.floor(b+0.001);b=Math.max(0,b-c);b*=100;var e=Math.floor(b+0.1);return[a,c,e]};Hp12c_machine.prototype.update_index=function(a,b,d){var c=H.binary_sgn(a);a=Math.abs(a);this.index=c*(a+b/1000+d/100000)};Hp12c_machine.prototype.f_isg=function(){var b=this.dissect_index();var a=b[0],c=b[1],d=b[2];a+=(d===0?1:d);this.incr_ip(a>c?1:0);this.update_index(a,c,d)};Hp12c_machine.prototype.f_dse=function(){var b=this.dissect_index();var a=b[0],c=b[1],d=b[2];a-=(d===0?1:d);this.incr_ip(a<=c?1:0);this.update_index(a,c,d)};Hp12c_machine.prototype.r_down=function(){var a=this.reg_tuple("x");this.reg_To_reg("y","x");this.reg_To_reg("z","y");this.reg_To_reg("w","z");this.reg_Set_tuple("w",a);this.display_result()};Hp12c_machine.prototype.r_up=function(){var a=this.reg_tuple("x");this.reg_To_reg("w","x");this.reg_To_reg("z","w");this.reg_To_reg("y","z");this.reg_Set_tuple("y",a);this.display_result()};Hp12c_machine.prototype.clx=function(){this.reg_Reset("x");this.display_result();this.pushed=1};Hp12c_machine.prototype.finish_arithmetic=function(e,d,c){if(H.type==="16c"){var f=Math.abs(e)>H.value_max;this.set_overflow(f)}this.save_lastx();this.pop();this.reg_Set_real("x",H.arithmetic_round(e,d,c));this.display_result()};Hp12c_machine.prototype.finish_arithmetic_int=function(a){this.save_lastx();this.pop();this.set_carry(a.carry);this.set_overflow(a.overflow);this.reg_Set_tuple("x",a.result);this.display_result()};Hp12c_machine.prototype.alg_resolve=function(){var c;var b=1;if((!this.algmode)||(this.alg_op<=0)){return b}var a=this.reg_real("x");var d=this.reg_real("y");if(this.alg_op==this.ALG_PLUS){this.finish_arithmetic(d+a,a,d)}else{if(this.alg_op==this.ALG_MINUS){this.finish_arithmetic(d-a,a,d)}else{if(this.alg_op==this.ALG_MULTIPLY){this.finish_arithmetic(d*a,0,0)}else{if(this.alg_op==this.ALG_DIVIDE){c=d/a;if(H.badnumber(c)){this.display_error(H.ERROR_DIVZERO);b=0}else{this.finish_arithmetic(c,0,0)}}else{if(this.alg_op==this.ALG_POWER){c=Math.pow(d,a);if(H.badnumber(c)){this.display_error(H.ERROR_DIVZERO);b=0}else{this.finish_arithmetic(c,0,0)}}}}}}this.alg_op=0;return b};Hp12c_machine.prototype.enter=function(a){if(this.algmode&&this.alg_op){this.alg_resolve()}else{if(!this.algmode||!a){this.push();this.display_result();this.pushed=1}else{this.display_result()}}};Hp12c_machine.prototype.plus=function(){if(this.notation>=H.NOTATION_INT){var b=this.reg_tuple("x");var d=this.reg_tuple("y");var c=H.integer_plus([b.h,b.r],[d.h,d.r],this.negative_repr,this.wordsize);this.finish_arithmetic_int(c);return}if(this.algmode){if(!this.alg_resolve()){return}this.alg_op=this.ALG_PLUS;this.push();this.display_result()}else{var a=this.reg_real("x");var e=this.reg_real("y");this.finish_arithmetic(e+a,a,e)}};Hp12c_machine.prototype.minus=function(){if(this.notation>=H.NOTATION_INT){var b=this.reg_tuple("x");var d=this.reg_tuple("y");var c=H.integer_minus([d.h,d.r],[b.h,b.r],this.negative_repr,this.wordsize);this.finish_arithmetic_int(c);return}if(this.algmode){if(!this.alg_resolve()){return}this.alg_op=this.ALG_MINUS;this.push();this.display_result()}else{var a=this.reg_real("x");var e=this.reg_real("y");this.finish_arithmetic(e-a,a,e)}};Hp12c_machine.prototype.multiply=function(){if(this.notation>=H.NOTATION_INT){var b=this.reg_tuple("x");var d=this.reg_tuple("y");var c=H.integer_multiply([b.h,b.r],[d.h,d.r],this.negative_repr,this.wordsize);c.carry=this.get_carry();this.finish_arithmetic_int(c);return}if(this.algmode){if(!this.alg_resolve()){return}this.alg_op=this.ALG_MULTIPLY;this.push();this.display_result()}else{var a=this.reg_real("x");var e=this.reg_real("y");this.finish_arithmetic(e*a,0,0)}};Hp12c_machine.prototype.divide=function(){if(this.notation>=H.NOTATION_INT){var a=this.reg_tuple("x");var d=this.reg_tuple("y");var b=H.integer_divide([d.h,d.r],[a.h,a.r],this.negative_repr,this.wordsize,false);if(b.overflow){this.display_error(H.ERROR_DIVZERO)}else{b.result=b.result[0];this.finish_arithmetic_int(b)}return}if(this.algmode){if(!this.alg_resolve()){return}this.alg_op=this.ALG_DIVIDE;this.push();this.display_result()}else{var c=this.reg_real("y")/this.reg_real("x");if(H.badnumber(c)){this.display_error(H.ERROR_DIVZERO)}else{this.finish_arithmetic(c,0,0)}}};Hp12c_machine.prototype.poweryx=function(){if(this.algmode){if(!this.alg_resolve()){return}this.alg_op=this.ALG_POWER;this.push();this.display_result()}else{var a=Math.pow(this.reg_real("y"),this.reg_real("x"));if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.finish_arithmetic(a,0,0)}}};Hp12c_machine.prototype.power10=function(){var a=Math.pow(10,this.reg_real("x"));if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",a);this.display_result()}};Hp12c_machine.prototype.reciprocal=function(){if(this.notation>=H.NOTATION_INT){return}var a=1/this.reg_real("x");if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",a);this.display_result()}};Hp12c_machine.prototype.square=function(){var a=Math.pow(this.reg_real("x"),2);if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",a);this.display_result()}};Hp12c_machine.prototype.sqroot=function(){if(this.notation>=H.NOTATION_INT){var a=this.reg_tuple("x");var b=H.integer_sqrt([a.h,a.r],this.negative_repr,this.wordsize);if(b.overflow){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_tuple("x",b.result);this.set_carry(b.carry);this.display_result()}return}var c=Math.pow(this.reg_real("x"),0.5);if(H.badnumber(c)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",c);this.display_result()}};Hp12c_machine.prototype.exp=function(){var a=Math.exp(this.reg_real("x"));if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",a);this.display_result()}};Hp12c_machine.prototype.ln=function(){var a=Math.log(this.reg_real("x"));if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",a);this.display_result()}};Hp12c_machine.prototype.log10=function(){var a=Math.log(this.reg_real("x"))/Math.log(10);if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",a);this.display_result()}};Hp12c_machine.prototype.trig=function(b){var a=Math[b](H.radians(this.reg_real("x"),this.trigo));if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",a);this.display_result()}};Hp12c_machine.prototype.triginv=function(b){var a=Math[b](this.reg_real("x"));if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",H.to_angle_mode(a,this.trigo));this.display_result()}};Hp12c_machine.prototype.htrig=function(b){var a=H[b].call(null,this.reg_real("x"));if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",a);this.display_result()}};Hp12c_machine.prototype.htriginv=function(b){var a=H[b].call(null,this.reg_real("x"));if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",a);this.display_result()}};Hp12c_machine.prototype.intg=function(){this.save_lastx();this.reg_Set_real("x",Math.floor(Math.abs(this.reg_real("x")))*H.binary_sgn(this.reg_real("x")));this.display_result()};Hp12c_machine.prototype.abs_integer=function(){var a=this.reg_tuple("x");var b=H.integer_abs([a.h,a.r],this.negative_repr,this.wordsize);this.save_lastx();this.reg_Set_tuple("x",b.result);this.set_overflow(b.overflow);this.display_result()};Hp12c_machine.prototype.abs=function(){if(this.notation>=H.NOTATION_INT){this.abs_integer();return}this.save_lastx();this.reg_Set_real("x",Math.abs(this.reg_real("x")));this.display_result()};Hp12c_machine.prototype.to_radians=function(){this.save_lastx();this.reg_Set_real("x",H.degrees_to_radians(this.reg_real("x")));this.display_result()};Hp12c_machine.prototype.to_degrees=function(){this.save_lastx();this.reg_Set_real("x",H.radians_to_degrees(this.reg_real("x")));this.display_result()};Hp12c_machine.prototype.to_hms=function(){this.save_lastx();this.reg_Set_real("x",H.hour_to_hms(this.reg_real("x")));this.display_result()};Hp12c_machine.prototype.to_hour=function(){this.save_lastx();this.reg_Set_real("x",H.hms_to_hour(this.reg_real("x")));this.display_result()};Hp12c_machine.prototype.pi=function(){this.push();this.reg_Set_real("x",Math.PI);this.display_result()};Hp12c_machine.prototype.random=function(){this.push();this.reg_Set_real("x",this.prng.random());this.display_result()};Hp12c_machine.prototype.random_sto=function(){var a=this.reg_real("x");this.prng=new H.Prng(a);this.display_result()};Hp12c_machine.prototype.rnd=function(){this.save_lastx();this.reg_Set_real("x",H.cl5_round(this.reg_real("x"),this.decimals));this.display_result()};Hp12c_machine.prototype.polar=function(){var a=H.polar(this.reg_real("x"),this.reg_real("y"));var b=a[0];var c=a[1];if(H.badnumber(b)||H.badnumber(c)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",b);this.reg_Set_real("y",H.to_angle_mode(c,this.trigo));this.display_result()}};Hp12c_machine.prototype.orthogonal=function(){var c=this.reg_real("x");var d=H.radians(this.reg_real("y"),this.trigo);var b=H.orthogonal(c,d);var a=b[0];var e=b[1];if(H.badnumber(a)||H.badnumber(e)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",a);this.reg_Set_real("y",e);this.display_result()}};Hp12c_machine.prototype.fatorial=function(){if((H.type!=="11c"&&H.type!=="15c"&&H.type!=="16c")&&(this.reg_real("x")<0||this.reg_real("x")!=Math.floor(this.reg_real("x")))){this.display_error(H.ERROR_DIVZERO);return}if(this.reg_real("x")>69.95){this.save_lastx();this.reg_Set_real("x",H.value_max);this.display_result();return}var a;if(H.type==="11c"||H.type==="15c"){a=H.fatorial_gamma(this.reg_real("x"))}else{a=H.fatorial(this.reg_real("x"))}if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO);return}this.save_lastx();this.reg_Set_real("x",a);this.display_result()};Hp12c_machine.prototype.frac=function(){this.save_lastx();this.reg_Set_real("x",(Math.abs(this.reg_real("x"))-Math.floor(Math.abs(this.reg_real("x"))))*H.binary_sgn(this.reg_real("x")));this.display_result()};Hp12c_machine.prototype.percent=function(){var a=this.reg_real("y")*this.reg_real("x")/100;if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",a);this.display_result()}};Hp12c_machine.prototype.percentT=function(){if(!this.alg_resolve()){return}var a=100*this.reg_real("x")/this.reg_real("y");if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",a);this.display_result()}};Hp12c_machine.prototype.deltapercent=function(){if(!this.alg_resolve()){return}var a=100*(this.reg_real("x")/this.reg_real("y"))-100;if(H.badnumber(a)){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();this.reg_Set_real("x",a);this.display_result()}};Hp12c_machine.prototype.sto=function(a){this.reg_To_sto("x",a);this.display_result_s(false,true)};Hp12c_machine.prototype.sto_index=function(b){var a=this.fix_index();if(a===null){return}this.reg_To_sto("x",a);this.display_result_s(false,true)};Hp12c_machine.prototype.get_index=function(){this.push();this.reg_Set_real("x",this.index);this.display_result()};Hp12c_machine.prototype.set_index=function(){this.index=this.reg_real("x");this.display_result()};Hp12c_machine.prototype.tarithmetic=function(a,b,d){var c={};c.r=c.i=c.h=0;if(d==="+"){c.r=a.r+b.r}else{if(d==="-"){c.r=a.r-b.r}else{if(d==="x"){c.r=a.r*b.r}else{if(d==="/"){c.r=a.r/b.r}}}}return c};Hp12c_machine.prototype.stoinfix_index=function(a){var b=this.fix_index();if(b===null){return}this.stoinfix(b,a)};Hp12c_machine.prototype.stoinfix=function(f,e){var d=this.sto_tuple(f);var c=this.reg_tuple("x");if(e==H.STO_PLUS){d=this.tarithmetic(d,c,"+")}else{if(e==H.STO_MINUS){d=this.tarithmetic(d,c,"-")}else{if(e==H.STO_TIMES){d=this.tarithmetic(d,c,"x")}else{if(e==H.STO_DIVIDE){d=this.tarithmetic(d,c,"/");if(H.badnumber(d.r)){this.display_error(H.ERROR_DIVZERO);return}}}}}if(Math.abs(d.r)>H.value_max){this.display_error(H.ERROR_OVERFLOW);return}this.sto_Set_tuple(f,d);this.display_result()};Hp12c_machine.prototype.stoCF0=function(){this.reg_To_sto("x",0);this.finmemory[H.FIN_N]=0;this.display_result()};Hp12c_machine.prototype.stoCFj=function(){if(this.finmemory[H.FIN_N]!=Math.floor(this.finmemory[H.FIN_N])||this.finmemory[H.FIN_N]<0||this.finmemory[H.FIN_N]>=H.MEM_MAX){this.display_error(H.ERROR_MEMORY)}else{this.finmemory[H.FIN_N]++;this.reg_To_sto("x",this.finmemory[H.FIN_N]);this.njmemory[this.finmemory[H.FIN_N]]=1;this.display_result()}};Hp12c_machine.prototype.rclCFj=function(){if(this.finmemory[H.FIN_N]<0||this.finmemory[H.FIN_N]>=H.MEM_MAX||Math.floor(this.finmemory[H.FIN_N])!=this.finmemory[H.FIN_N]){this.display_error(H.ERROR_MEMORY)}else{this.push();this.sto_To_reg(this.finmemory[H.FIN_N],"x");--this.finmemory[H.FIN_N];this.display_result()}};Hp12c_machine.prototype.rclNj=function(){if(this.finmemory[H.FIN_N]<0||this.finmemory[H.FIN_N]>=H.MEM_MAX||Math.floor(this.finmemory[H.FIN_N])!=this.finmemory[H.FIN_N]){this.display_error(H.ERROR_MEMORY)}else{this.push();this.reg_Set_real("x",this.njmemory[this.finmemory[H.FIN_N]]);this.display_result()}};Hp12c_machine.prototype.stoNj=function(){if(this.finmemory[H.FIN_N]!=Math.floor(this.finmemory[H.FIN_N])||this.finmemory[H.FIN_N]<0||this.finmemory[H.FIN_N]>=H.MEM_MAX||this.reg_real("x")!=Math.floor(this.reg_real("x"))||this.reg_real("x")<=0){this.display_error(H.ERROR_MEMORY)}else{this.njmemory[this.finmemory[H.FIN_N]]=this.reg_real("x");this.display_result()}};Hp12c_machine.prototype.stofin=function(a){this.finmemory[a]=this.reg_real("x");this.display_result();this.pushed=1;this.do_fincalc=1};Hp12c_machine.prototype.ston_12x=function(){var a=this.reg_real("x")*12;if(Math.abs(a)>H.value_max){this.display_error(H.ERROR_OVERFLOW);return}this.reg_Set_real("x",a);this.stofin(0)};Hp12c_machine.prototype.stoi_12div=function(){this.reg_Set_real("x",this.reg_real("x")/12);this.stofin(1)};Hp12c_machine.prototype.rcl=function(a){this.push();this.sto_To_reg(a,"x");this.display_result()};Hp12c_machine.prototype.rcl_index=function(b){var a=this.fix_index();if(a===null){return}this.push();this.sto_To_reg(a,"x");this.display_result()};Hp12c_machine.prototype.rclfin=function(a){this.push();this.reg_Set_real("x",this.finmemory[a]);this.display_result()};Hp12c_machine.prototype.stat_sigma_rcl=function(){this.push();this.push();this.sto_To_reg(H.STAT_X,"x");this.sto_To_reg(H.STAT_Y,"y");this.display_result()};Hp12c_machine.prototype.stat_sigma_plus=function(){if(!this.alg_resolve()){return}H.stat_accumulate(+1,this.sto_mem_ref(),this.reg_real("x"),this.reg_real("y"));this.save_lastx();this.sto_To_reg(H.STAT_N,"x");this.display_result();this.pushed=1};Hp12c_machine.prototype.stat_sigma_minus=function(){if(!this.alg_resolve()){return}H.stat_accumulate(-1,this.sto_mem_ref(),this.reg_real("x"),this.reg_real("y"));this.save_lastx();this.sto_To_reg(H.STAT_N,"x");this.display_result();this.pushed=1};Hp12c_machine.prototype.stat_avgw=function(){this.alg_op=0;var a=H.stat_avgw(this.sto_mem_ref());if(!a[0]){this.display_error(H.ERROR_STAT)}else{this.save_lastx();this.reg_Set_real("x",a[1]);this.display_result()}};Hp12c_machine.prototype.stat_avg=function(){this.alg_op=0;var a=H.stat_avg(this.sto_mem_ref());if(!a[0]){this.display_error(H.ERROR_STAT)}else{this.save_lastx();this.push();this.reg_Set_real("x",a[1]);this.reg_Set_real("y",a[2]);this.display_result()}};Hp12c_machine.prototype.stat_stddev=function(){this.alg_op=0;var a=H.stddev(this.sto_mem_ref());if(!a[0]){this.display_error(H.ERROR_STAT);return}this.save_lastx();this.push();this.reg_Set_real("x",a[1]);this.reg_Set_real("y",a[2]);this.display_result()};Hp12c_machine.prototype.stat_lr=function(b){this.alg_op=0;var a=H.stat_kr(this.sto_mem_ref(),b,this.reg_real("x"));if(!a[0]){this.display_error(H.ERROR_STAT)}else{this.save_lastx();this.push();this.reg_Set_real("x",a[1]);this.reg_Set_real("y",a[2]);this.display_result()}};Hp12c_machine.prototype.stat_linearregression=function(){this.alg_op=0;var a=H.linear_regression(this.sto_mem_ref());if(!a[0]){this.display_error(H.ERROR_STAT)}else{this.save_lastx();this.push();this.push();this.reg_Set_real("x",a[1]);this.reg_Set_real("y",a[2]);this.display_result()}};Hp12c_machine.prototype.permutations=function(){var a=this.reg_real("x");var c=this.reg_real("y");if(a<0||a!=Math.floor(a)||a>80||c<0||c!=Math.floor(c)||c>80||c<a){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();var b=H.permutations(c,a);if(H.badnumber(b)){this.display_error(H.ERROR_DIVZERO);return}this.pop();this.reg_Set_real("x",b);this.display_result()}};Hp12c_machine.prototype.combinations=function(){var a=this.reg_real("x");var c=this.reg_real("y");if(a<0||a!=Math.floor(a)||a>80||c<0||c!=Math.floor(c)||c>80||c<a){this.display_error(H.ERROR_DIVZERO)}else{this.save_lastx();var b=H.combinations(c,a);if(H.badnumber(b)){this.display_error(H.ERROR_DIVZERO);return}this.pop();this.reg_Set_real("x",b);this.display_result()}};Hp12c_machine.prototype.simple_interest=function(){if(!this.alg_resolve()){return}var c=this.finmemory[H.FIN_N];var a=this.finmemory[H.FIN_I]/100;var b=this.finmemory[H.FIN_PV];this.push();this.push();this.push();this.reg_Set_real("x",c/360*-b*a);this.reg_Set_real("y",-b);this.reg_Set_real("z",c/365*-b*a);this.display_result()};Hp12c_machine.prototype.sto_or_calc_fin=function(c){if(!this.alg_resolve()){return}if(!this.do_fincalc){this.stofin(c)}else{this.cli("sto_or_calc_fin");H.display.show("running");var b=this;window.setTimeout(function(){b.sti("sto_or_calc_fin");var a=H.financecalc(c,b.begin,b.compoundf,b.finmemory);if(a==-1){b.reg_Set_real("x",b.finmemory[c]);b.display_result()}else{b.display_error(a)}},200)}};Hp12c_machine.prototype.npv=function(){this.alg_op=0;this.push();this.reg_Set_real("x",H.npv(this.finmemory[H.FIN_N],this.finmemory[H.FIN_I],this.sto_mem_ref(),this.njmemory));this.finmemory[H.FIN_PV]=this.x;this.display_result()};Hp12c_machine.prototype.irr=function(){this.alg_op=0;H.display.show("running");var a=H.irr_calc(this.finmemory[H.FIN_N],this.finmemory[H.FIN_I],this.sto_mem_ref(),this.njmemory);var b=a[0];this.finmemory[H.FIN_I]=a[1];if(b!=-1){this.display_error(b)}else{this.push();this.reg_Set_real("x",this.finmemory[H.FIN_I]);this.display_result()}};Hp12c_machine.prototype.date_date=function(){this.alg_op=0;var a=H.date_interpret(this.reg_real("y"),this.dmy);if(a===null){this.display_error(H.ERROR_DATE);return}this.save_lastx();H.date_add(a,this.reg_real("x"));this.pop();this.reg_Set_real("x",H.date_gen(a,this.dmy));this.display_result_date(a)};Hp12c_machine.prototype.date_dys=function(){this.alg_op=0;var a=H.date_interpret(this.reg_real("x"),this.dmy);var b=H.date_interpret(this.reg_real("y"),this.dmy);if((b===null)||(a===null)){this.display_error(H.ERROR_DATE);return}this.save_lastx();this.reg_Set_real("x",H.date_diff(b,a));this.reg_Set_real("y",H.date_diff30(b,a));this.display_result()};Hp12c_machine.prototype.amortization=function(){this.alg_op=0;var a=this.reg_real("x");var c=this.finmemory[H.FIN_N];var f=this.finmemory[H.FIN_I]/100;var j=H.cl5_round(this.finmemory[H.FIN_PV],this.decimals);this.finmemory[H.FIN_PV]=j;var e=H.cl5_round(this.finmemory[H.FIN_PMT],this.decimals);this.finmemory[H.FIN_PMT]=e;var g=H.amortization(a,c,f,j,e,this.decimals,this.begin);var d=g[0];var b=g[1];var h=g[2];this.push();this.push();this.reg_Set_real("x",b);this.reg_Set_real("y",h);this.reg_Set_real("z",a);this.finmemory[H.FIN_N]+=a;this.finmemory[H.FIN_PV]+=h;this.display_result()};Hp12c_machine.prototype.bond_price=function(){this.alg_op=0;var d=this.finmemory[H.FIN_I];if(d<=-100){this.display_error(H.ERROR_INTEREST);return}var a=this.finmemory[H.FIN_PMT];var e=H.date_interpret(this.reg_real("y"),this.dmy);if(e===null){this.display_error(H.ERROR_DATE);return}var c=H.date_interpret(this.reg_real("x"),this.dmy);if(c===null){this.display_error(H.ERROR_DATE);return}var b=H.bond_price(d,a,e,c);if(!b){this.display_error(H.ERROR_INTEREST);return}else{if(b[0]>=0){this.display_error(b[0]);return}}this.push();this.push();this.finmemory[H.FIN_N]=b[1];this.reg_Set_real("x",b[1]);this.reg_Set_real("y",b[2]);this.display_result()};Hp12c_machine.prototype.bond_yield=function(){this.alg_op=0;var a=this.finmemory[H.FIN_PMT];var g=H.date_interpret(this.reg_real("y"),this.dmy);var d=H.date_interpret(this.reg_real("x"),this.dmy);var f=this.finmemory[H.FIN_PV];var b=H.bond_yield(a,g,d,f);var e=b[0];var c=b[1];if(e>=0){this.display_error(e);return}this.push();this.finmemory[H.FIN_I]=c;this.reg_Set_real("x",c);this.display_result()};Hp12c_machine.prototype.depreciation_sl=function(){this.alg_op=0;var h=this.finmemory[H.FIN_PV];var f=this.finmemory[H.FIN_FV];var e=this.finmemory[H.FIN_N];var c=this.reg_real("x");var a=H.depreciation_sl(h,f,e,c);var d=a[0];var g=a[1];var b=a[2];if(d>=0){this.display_error(d);return}this.push();this.push();this.reg_Set_real("x",g);this.reg_Set_real("y",b);this.display_result()};Hp12c_machine.prototype.depreciation_soyd=function(){this.alg_op=0;var h=this.finmemory[H.FIN_PV];var f=this.finmemory[H.FIN_FV];var e=this.finmemory[H.FIN_N];var c=this.reg_real("x");var a=H.depreciation_soyd(h,f,e,c);var d=a[0];var g=a[1];var b=a[2];if(d>=0){this.display_error(d);return}this.push();this.push();this.reg_Set_real("x",g);this.reg_Set_real("y",b);this.display_result()};Hp12c_machine.prototype.depreciation_db=function(){this.alg_op=0;var b=this.finmemory[H.FIN_PV];var e=this.finmemory[H.FIN_FV];var g=this.finmemory[H.FIN_N];var f=this.reg_real("x");var i=this.finmemory[H.FIN_I]/100;var d=H.depreciation_db(b,e,g,f,i);var c=d[0];var h=d[1];var a=d[2];if(c>=0){this.display_error(c);return}this.push();this.push();this.reg_Set_real("x",h);this.reg_Set_real("y",a);this.display_result()};Hp12c_machine.prototype.display_program_opcode=function(){var b=this.ram[this.ip];if(H.type==="16c"){b=H.pgrm.hex_opcode(b)}var a=H.zeropad(this.ip.toFixed(0),H.ram_ADDR_SIZE)+"-"+b;H.display.show(a)};Hp12c_machine.prototype.prog_pr=function(){if(this.program_mode==H.INTERACTIVE){this.program_mode=H.PROGRAMMING;this.display_pgrm();this.display_program_opcode()}};Hp12c_machine.prototype.prog_bst_after=function(){this.sti("bst_after");this.display_result_s(false,false)};Hp12c_machine.prototype.gto_digit_add=function(b){if(b>9){this.display_error(H.ERROR_IMPROPER_N);return}this.gtoxx=""+this.gtoxx+b.toFixed(0);if(this.gtoxx.length>=H.ram_ADDR_SIZE){var a=parseInt(this.gtoxx,10);this.gtoxx="";this.rst_modifier();if(a>this.program_limit()){this.display_error(H.ERROR_IP);return}this.ip=a}};Hp12c_machine.prototype.ntest=function(c,d,b){if(c!=="0"){c=this.reg_tuple(c)}else{c={r:0,h:0,i:0}}if(b!=="0"){b=this.reg_tuple(b)}else{b={r:0,h:0,i:0}}var a;if(this.notation>=H.NOTATION_INT){if(d=="=="||d=="="||d=="==="){a=H.integer_eq(c,b,this.negative_repr,this.wordsize)}else{if(d=="<="){a=H.integer_le(c,b,this.negative_repr,this.wordsize)}else{if(d=="<"){a=H.integer_lt(c,b,this.negative_repr,this.wordsize)}}}}else{c=c.r;b=b.r;if(d=="=="||d=="="||d=="==="){a=H.feq10(c,b)}else{if(d=="<="){a=c<=b}else{if(d=="<"){a=c<b}}}}return a};Hp12c_machine.prototype.test=function(a){this.display_result_s(false,true);this.incr_ip(a?0:1)};Hp12c_machine.prototype.test_x_le_y=function(){this.test(this.ntest("x","<=","y"))};Hp12c_machine.prototype.test_x_gt_y=function(){this.test(!this.ntest("x","<=","y"))};Hp12c_machine.prototype.test_x_eq_y=function(){this.test(this.ntest("x","==","y"))};Hp12c_machine.prototype.test_x_ne_y=function(){this.test(!this.ntest("x","==","y"))};Hp12c_machine.prototype.test_x_less_0=function(){this.test(this.ntest("x","<","0"))};Hp12c_machine.prototype.test_x_gt_0=function(){this.test(!this.ntest("x","<=","0"))};Hp12c_machine.prototype.test_x_le_0=function(){this.test(this.ntest("x","<=","0"))};Hp12c_machine.prototype.test_x_eq0=function(){this.test(this.ntest("x","==","0"))};Hp12c_machine.prototype.test_x_ne0=function(){this.test(!this.ntest("x","==","0"))};Hp12c_machine.prototype.gto_buf_clear=function(){this.gtoxx=""};Hp12c_machine.prototype.nop=function(){};Hp12c_machine.prototype.solve=function(){};Hp12c_machine.prototype.matrix=function(){};Hp12c_machine.prototype.matrix_dim=function(){};Hp12c_machine.prototype.result15c=function(){};Hp12c_machine.prototype.test_15c=function(){};Hp12c_machine.prototype.integral=function(){};Hp12c_machine.prototype.complex_re_im=function(){};Hp12c_machine.prototype.window_count=function(){if(this.notation<H.NOTATION_INT){return 1}var a=H.digit_bits[this.notation];var b=H.win_digits[this.notation];var c=Math.ceil(this.wordsize/a);return Math.ceil(c/b)};Hp12c_machine.prototype.set_window=function(a){this.intwindow=a;this.display_wordstatus();this.display_result_s(false,false)};Hp12c_machine.prototype.show_window=function(a){if(this.notation<H.NOTATION_INT){return}console.log("Setting window to "+a);if(a<0||a>=this.window_count()){this.display_error(H.ERROR_IMPROPER_N);return}this.set_window(a)};Hp12c_machine.prototype.prepare_for_integer_mode=function(){var a=this.reg_real("x");var b={r:0,h:0,i:0};var c={r:0,h:0,i:0};if(a!==0&&!H.badnumber(a)){a=Math.abs(a);var d=Math.floor(Math.log(Math.abs(a))/Math.log(2))+1;b=a*Math.pow(2,32-d);c=d-32;if(this.negative_repr<=0){b=Math.abs(b)}b=Math.round(b).toString();b=H.string_to_integer(b,this.negative_repr,56,10);c=Math.round(c).toString();c=H.string_to_integer(c,this.negative_repr,56,10)}this.wordsize=56;this.notation=H.NOTATION_INT_HEX;this.reg_Set_tuple("x",c);this.reg_Set_tuple("y",b);this.reg_Set_tuple("z",{r:0,h:0,i:0});this.reg_Set_tuple("w",{r:0,h:0,i:0});this.reg_Set_tuple("last_x",{r:0,h:0,i:0});this.set_overflow(0);this.set_carry(0)};Hp12c_machine.prototype.prepare_for_float_mode=function(){var a=this.reg_tuple("x");var c=this.reg_tuple("y");a=H.integer_to_string(a,this.negative_repr,this.wordsize,10,true);c=H.integer_to_string(c,this.negative_repr,this.wordsize,10,true);a=parseInt(a,10);c=parseInt(c,10);this.set_overflow(0);var b=c*Math.pow(2,a);if(b>H.value_max){b=H.value_max;this.set_overflow(1)}else{if(b<-H.value_max){b=-H.value_max;this.set_overflow(1)}else{if(H.badnumber(b)){b=0;this.set_overflow(1)}}}this.notation=H.NOTATION_FIX;this.reg_Set_tuple("x",{r:b,h:0,i:0});this.reg_Set_tuple("z",{r:0,h:0,i:0});this.reg_Set_tuple("w",{r:0,h:0,i:0});this.reg_Set_tuple("y",{r:0,h:0,i:0});this.reg_Set_tuple("last_x",{r:0,h:0,i:0});this.set_carry(0);this.wordsize=56};Hp12c_machine.prototype.word_bit=function(a,b){if(b>=this.wordsize){console.log("word_bit: n > wordsize");return 0}return H.word_bit(a,b)};Hp12c_machine.prototype.word_Set_bit=function(b,c,a){if(c>=this.wordsize){console.log("word_Set_bit: n > wordsize");return}H.word_Set_bit(b,c,a)};Hp12c_machine.prototype.word_Set_msb=function(b,a){this.word_Set_bit(b,this.wordsize-1,a)};Hp12c_machine.prototype.word_Set_lsb=function(b,a){this.word_Set_bit(b,0,a)};Hp12c_machine.prototype.word_msb=function(a){return this.word_bit(a,this.wordsize-1)};Hp12c_machine.prototype.word_lsb=function(a){return this.word_bit(a,0)};Hp12c_machine.prototype.set_carry=function(a){if(H.type==="16c"){if(a){this.do_sf(H.FLAG_CARRY)}else{this.do_cf(H.FLAG_CARRY)}}};Hp12c_machine.prototype.set_overflow=function(a){if(H.type==="16c"){if(a){this.do_sf(H.FLAG_OVERFLOW)}else{this.do_cf(H.FLAG_OVERFLOW)}}};Hp12c_machine.prototype.get_carry=function(a){return this.flags[H.FLAG_CARRY]};Hp12c_machine.prototype.get_zeros_flag=function(a){return this.flags[H.FLAG_ZEROS]};Hp12c_machine.prototype.get_overflow=function(a){return this.flags[H.FLAG_OVERFLOW]};Hp12c_machine.prototype.shift_left_tuple=function(a){this.cast_wordsize(a);a.h=a.h<<1;if(a.r&2147483648){a.h=a.h|1}a.r=a.r<<1;this.cast_wordsize(a);return a};Hp12c_machine.prototype.shift_right_tuple=function(a){this.cast_wordsize(a);a.r=a.r>>>1;if(a.h&1){a.r=a.r|2147483648}a.h=a.h>>>1;this.cast_wordsize(a);return a};Hp12c_machine.prototype.shiftleft=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");this.cast_wordsize(a);this.set_carry(this.word_msb(a));this.shift_left_tuple(a);this.save_lastx();this.reg_Set_tuple("x",a);this.display_result()};Hp12c_machine.prototype.shiftright=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");this.cast_wordsize(a);this.set_carry(this.word_lsb(a));this.shift_right_tuple(a);this.save_lastx();this.reg_Set_tuple("x",a);this.display_result()};Hp12c_machine.prototype.leftjustify=function(){if(this.notation<H.NOTATION_INT){return}var b=0;var a=this.reg_tuple("x");this.cast_wordsize(a);if(a.r===0&&a.h===0){}else{while(!this.word_msb(a)){this.shift_left_tuple(a);++b}}this.save_lastx();this.push();this.reg_Set_tuple("y",a);this.reg_Set_real("x",b);this.display_result()};Hp12c_machine.prototype.arithmeticshift=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");this.cast_wordsize(a);var b=this.word_msb(a);this.set_carry(this.word_lsb(a));this.shift_right_tuple(a);if(this.wordsize>1){this.word_Set_msb(a,b)}this.save_lastx();this.reg_Set_tuple("x",a);this.display_result()};Hp12c_machine.prototype.rotateleftc=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");this.rotate_left_tuple(a,1);this.save_lastx();this.reg_Set_tuple("x",a);this.display_result()};Hp12c_machine.prototype.rotaterightc=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");this.cast_wordsize(a);var b=this.word_lsb(a);var c=this.get_carry();this.shift_right_tuple(a);this.set_carry(b);this.word_Set_msb(a,c);this.save_lastx();this.reg_Set_tuple("x",a);this.display_result()};Hp12c_machine.prototype.rotate_left_tuple=function(b,c){this.cast_wordsize(b);var a=this.word_msb(b);var d=this.get_carry(b);this.shift_left_tuple(b);this.set_carry(a);if(c){this.word_Set_lsb(b,d)}else{this.word_Set_lsb(b,a)}this.cast_wordsize(b);return b};Hp12c_machine.prototype.rotateleft=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");this.rotate_left_tuple(a,0);this.save_lastx();this.reg_Set_tuple("x",a);this.display_result()};Hp12c_machine.prototype.rotate_right_tuple=function(a,b){this.cast_wordsize(a);var c=this.word_lsb(a);var d=this.get_carry();this.shift_right_tuple(a);this.set_carry(c);if(b){this.word_Set_msb(a,d)}else{this.word_Set_msb(a,c)}this.cast_wordsize(a);return a};Hp12c_machine.prototype.rotateright=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");this.rotate_right_tuple(a,0);this.save_lastx();this.reg_Set_tuple("x",a);this.display_result()};Hp12c_machine.prototype.rotateleftn=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("y");var b=Math.abs(this.reg_real("x"));if(b<0||b>this.wordsize){this.display_error(H.ERROR_IMPROPER_BIT);return}while(--b>=0){this.rotate_left_tuple(a,0)}this.save_lastx();this.pop();this.reg_Set_tuple("x",a);this.display_result()};Hp12c_machine.prototype.rotaterightn=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("y");var b=Math.abs(this.reg_real("x"));if(b<0||b>this.wordsize){this.display_error(H.ERROR_IMPROPER_BIT);return}while(--b>=0){this.rotate_right_tuple(a,0)}this.save_lastx();this.pop();this.reg_Set_tuple("x",a);this.display_result()};Hp12c_machine.prototype.rotateleftcn=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("y");var b=Math.abs(this.reg_real("x"));if(b<0||b>this.wordsize){this.display_error(H.ERROR_IMPROPER_BIT);return}while(--b>=0){this.rotate_left_tuple(a,1)}this.save_lastx();this.pop();this.reg_Set_tuple("x",a);this.display_result()};Hp12c_machine.prototype.rotaterightcn=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("y");var b=Math.abs(this.reg_real("x"));if(b<0||b>this.wordsize){this.display_error(H.ERROR_IMPROPER_BIT);return}while(--b>=0){this.rotate_right_tuple(a,1)}this.save_lastx();this.pop();this.reg_Set_tuple("x",a);this.display_result()};Hp12c_machine.prototype.maskleft=function(){if(this.notation<H.NOTATION_INT){return}var b=Math.abs(this.reg_real("x"));if(b<0||b>this.wordsize){this.display_error(H.ERROR_IMPROPER_BIT);return}var a={r:4294967295,h:4294967295,i:0};b=this.wordsize-b;while(--b>=0){this.shift_left_tuple(a,0)}this.save_lastx();this.reg_Set_tuple("x",a);this.display_result()};Hp12c_machine.prototype.bitcount=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");this.cast_wordsize(a);var b=0;while(a.r||a.h){if(a.r&1){++b}if(a.h&1){++b}a.r=a.r>>>1;a.h=a.h>>>1}this.save_lastx();this.reg_Set_real("x",b);this.display_result()};Hp12c_machine.prototype.maskright=function(){if(this.notation<H.NOTATION_INT){return}var b=Math.abs(this.reg_real("x"));if(b<0||b>this.wordsize){this.display_error(H.ERROR_IMPROPER_BIT);return}var a={r:4294967295,h:4294967295,i:0};if(b<=0){a.h=a.r=0}else{if(b<=32){a.h=0;a.r=a.r>>>(32-b)}else{a.h=a.h>>>(64-b)}}this.save_lastx();this.reg_Set_tuple("x",a);this.display_result()};Hp12c_machine.prototype.bit_xor=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");var c=this.reg_tuple("y");this.cast_wordsize(a);this.cast_wordsize(c);var b={r:(a.r^c.r),h:(a.h^c.h),i:0};this.save_lastx();this.pop();this.reg_Set_tuple("x",b);this.display_result()};Hp12c_machine.prototype.show_integer_diff=function(b){if(this.notation<H.NOTATION_INT){return}else{if(b==this.notation){return}}this.cli("show_integer_diff");this.saved_notation=this.notation;this.notation=b;this.display_result_s(true,false);var a=this;window.setTimeout(function(){a.sti("show_integer_diff");a.notation=a.saved_notation;a.display_result()},2000)};Hp12c_machine.prototype.show_integer_hex=function(){this.show_integer_diff(H.NOTATION_INT_HEX)};Hp12c_machine.prototype.show_integer_dec=function(){this.show_integer_diff(H.NOTATION_INT_DEC)};Hp12c_machine.prototype.show_integer_oct=function(){this.show_integer_diff(H.NOTATION_INT_OCT)};Hp12c_machine.prototype.show_integer_bin=function(){this.show_integer_diff(H.NOTATION_INT_BIN)};Hp12c_machine.prototype.integer_hex=function(){if(this.notation<H.NOTATION_INT){this.prepare_for_integer_mode()}this.notation=H.NOTATION_INT_HEX;this.set_window(0)};Hp12c_machine.prototype.integer_dec=function(){if(this.notation<H.NOTATION_INT){this.prepare_for_integer_mode()}this.notation=H.NOTATION_INT_DEC;this.set_window(0)};Hp12c_machine.prototype.integer_oct=function(){if(this.notation<H.NOTATION_INT){this.prepare_for_integer_mode()}this.notation=H.NOTATION_INT_OCT;this.set_window(0)};Hp12c_machine.prototype.integer_bin=function(){if(this.notation<H.NOTATION_INT){this.prepare_for_integer_mode()}this.notation=H.NOTATION_INT_BIN;this.set_window(0)};Hp12c_machine.prototype.set_bit=function(){if(this.notation<H.NOTATION_INT){return}var a=Math.abs(this.reg_real("x"));var b=this.reg_tuple("y");if(a<0||a>=this.wordsize){this.display_error(H.ERROR_IMPROPER_BIT);return}this.cast_wordsize(b);this.word_Set_bit(b,a,1);this.save_lastx();this.pop();this.reg_Set_tuple("x",b);this.display_result()};Hp12c_machine.prototype.clr_bit=function(){if(this.notation<H.NOTATION_INT){return}var a=Math.abs(this.reg_real("x"));var b=this.reg_tuple("y");if(a<0||a>=this.wordsize){this.display_error(H.ERROR_IMPROPER_BIT);return}this.cast_wordsize(b);this.word_Set_bit(b,a,0);this.save_lastx();this.pop();this.reg_Set_tuple("x",b);this.display_result()};Hp12c_machine.prototype.bit_question=function(){if(this.notation<H.NOTATION_INT){return}var a=Math.abs(this.reg_real("x"));var b=this.reg_tuple("y");if(a<0||a>=this.wordsize){this.display_error(H.ERROR_IMPROPER_BIT);return}this.save_lastx();this.pop();this.incr_ip(this.word_bit(b,a)?0:1);this.display_result()};Hp12c_machine.prototype.sc_cpl1=function(){if(this.notation<H.NOTATION_INT){return}this.negative_repr=1;this.display_wordstatus();this.display_result_s(true,false)};Hp12c_machine.prototype.sc_cpl2=function(){if(this.notation<H.NOTATION_INT){return}this.negative_repr=2;this.display_wordstatus();this.display_result_s(true,false)};Hp12c_machine.prototype.sc_unsigned=function(){if(this.notation<H.NOTATION_INT){return}this.negative_repr=0;this.display_wordstatus();this.display_result_s(true,false)};Hp12c_machine.prototype.bit_not=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");this.cast_wordsize(a);var b={r:~a.r,h:~a.h,i:0};this.save_lastx();this.reg_Set_tuple("x",b);this.display_result()};Hp12c_machine.prototype.move_window_l=function(){if(this.notation<H.NOTATION_INT){return}var a=this.intwindow+1;if(a>=0&&a<this.window_count()){this.set_window(a)}};Hp12c_machine.prototype.move_window_r=function(){if(this.notation<H.NOTATION_INT){return}var a=this.intwindow-1;if(a>=0&&a<this.window_count()){this.set_window(a)}};Hp12c_machine.prototype.wsize=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_real("x");if(a<0||a>64){this.display_error(H.ERROR_IMPROPER_BIT);return}if(a===0){a=64}this.wordsize=a;this.save_lastx();this.cast_wordsize_in_accumulators();this.pop();this.display_wordstatus();this.display_result()};Hp12c_machine.prototype.status_16c=function(){var a="";if(this.negative_repr<=0){a="U"}else{a=""+this.negative_repr}a+="-";a+=H.zeropad(""+this.wordsize,2);a+="-";var c;for(c=3;c>=0;--c){a+=(this.flags[c]?"1":"0")}this.cli("status_16c");H.display.show(a);var b=this;window.setTimeout(function(){b.sti("status_16c");b.display_result_s(false,false)},1000)};Hp12c_machine.prototype.bit_and=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");var c=this.reg_tuple("y");this.cast_wordsize(a);this.cast_wordsize(c);var b={r:(a.r&c.r),h:(a.h&c.h),i:0};this.save_lastx();this.pop();this.reg_Set_tuple("x",b);this.display_result()};Hp12c_machine.prototype.bit_or=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");var c=this.reg_tuple("y");this.cast_wordsize(a);this.cast_wordsize(c);var b={r:(a.r|c.r),h:(a.h|c.h),i:0};this.save_lastx();this.pop();this.reg_Set_tuple("x",b);this.display_result()};Hp12c_machine.prototype.dsz=function(){if(this.notation>=H.NOTATION_INT){this.index=Math.round(this.index)}this.index--;this.incr_ip(this.index===0?1:0);this.display_result_s(false,true)};Hp12c_machine.prototype.isz=function(){if(this.notation>=H.NOTATION_INT){this.index=Math.round(this.index)}this.index++;this.incr_ip(this.index===0?1:0);this.display_result_s(false,true)};Hp12c_machine.prototype.rmd=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");var c=this.reg_tuple("y");this.cast_wordsize(a);this.cast_wordsize(c);if(a.r===0&&a.h===0){this.display_error(H.ERROR_DIVZERO);return}var b=H.integer_divide([c.h,c.r],[a.h,a.r],this.negative_repr,this.wordsize,false);if(b.overflow){this.display_error(H.ERROR_DIVZERO);return}this.save_lastx();this.pop();this.reg_Set_tuple("x",b.result[1]);this.display_result()};Hp12c_machine.prototype.dblr=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");var d=this.reg_tuple("y");var c=this.reg_tuple("z");this.cast_wordsize(a);this.cast_wordsize(d);this.cast_wordsize(c);if(a.r===0&&a.h===0){this.display_error(H.ERROR_DIVZERO);return}var b=H.integer_divide([d.h,d.r,c.h,c.r],[a.h,a.r],this.negative_repr,this.wordsize,true);if(b.overflow){this.display_error(H.ERROR_DIVZERO);return}this.save_lastx();this.pop();this.pop();this.reg_Set_tuple("x",b.result[1]);this.display_result()};Hp12c_machine.prototype.dblmult=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");var c=this.reg_tuple("y");this.cast_wordsize(a);this.cast_wordsize(c);var b=H.integer_multiply([c.h,c.r],[a.h,a.r],this.negative_repr,this.wordsize,true);this.save_lastx();this.set_overflow(b.overflow);this.reg_Set_tuple("x",b.result[1]);this.reg_Set_tuple("y",b.result[0]);this.display_result()};Hp12c_machine.prototype.dbldiv=function(){if(this.notation<H.NOTATION_INT){return}var a=this.reg_tuple("x");var d=this.reg_tuple("y");var c=this.reg_tuple("z");this.cast_wordsize(a);this.cast_wordsize(d);this.cast_wordsize(c);if(a.r===0&&a.h===0){this.display_error(H.ERROR_DIVZERO);return}var b=H.integer_divide([d.h,d.r,c.h,c.r],[a.h,a.r],this.negative_repr,this.wordsize,true);if(b.overflow){this.display_error(H.ERROR_DIVZERO);return}this.save_lastx();this.pop();this.pop();this.set_carry(b.carry);this.set_overflow(b.overflow);this.reg_Set_tuple("x",b.result[0]);this.display_result()};"use strict";H.INTERPOLATION_MAX=50;H.solve_infinity=function(a){if(a>Math.pow(10,95)){a=Math.pow(10,95)}else{if(a<-Math.pow(10,95)){a=-Math.pow(10,95)}}return a};H.npv=function(c,h,g,b){var l=g[0];var d=0;for(var k=1;k<=c;++k){var a=g[k];for(var j=1;j<=b[k];++j){++d;l+=a/Math.pow(1+(h/100),d)}}return l};H.comppmtlim=function(a,b){if(Math.abs(a)<1e-8){return b}else{return(1-Math.pow(1+(a/100),-b))/(a/100)}};H.calcNPV=function(g,h,a,e,c,f,b,d){if(h==Math.floor(h)||g){return e+(1+(a/100)*(b?1:0))*c*H.comppmtlim(a,h)+f*Math.pow(1+(a/100),-h)}else{if(!d){return e*(1+((a/100)*(h-Math.floor(h))))+(1+(a/100)*(b?1:0))*c*H.comppmtlim(a,Math.floor(h))+f*Math.pow(1+(a/100),-Math.floor(h))}else{return e*Math.pow(1+(a/100),(h-Math.floor(h)))+(1+(a/100)*(b?1:0))*c*H.comppmtlim(a,Math.floor(h))+f*Math.pow(1+(a/100),-Math.floor(h))}}};H.bond_previous_coupon=function(c,b){var f=0;var a=new Date(b);var e;while(a>c){e=new Date(a);++f;a.setDate(1);a.setMonth(a.getMonth()-6);var d=a.getMonth();a.setDate(b.getDate());if(a.getMonth()!=d){return null}}return[a,e,f]};H.bond_price=function(f,l,i,a){var k;var c;var b=a;var d=H.date_diff(i,a);if(d<=0){return[H.ERROR_DATE,0,0]}var n=H.bond_previous_coupon(i,a);if(n===null){return[H.ERROR_DATE,0,0]}var o=H.date_diff(n[0],n[1]);var j=H.date_diff(i,n[1]);var g=n[2];var h=o-j;if(d<=o){k=(100*(100+l/2))/(100+((d/o)*f/2))}else{k=100/Math.pow(1+f/200,g-1+j/o);for(var m=1;m<=g;++m){k+=(l/2)/Math.pow(1+f/200,m-1+j/o)}}c=(l/2)*h/o;k-=c;if(H.badnumber(k)||H.badnumber(c)){return[H.ERROR_INTEREST,0,0]}return[-1,k,c]};H.irr_npvsum=function(d,c){var a=Math.abs(c[0]);for(var b=1;b<=d;++b){a+=Math.abs(c[b])}return a};H.irr_calc=function(f,j,h,b){var m;var a;var o;var g;var e;var d=H.INTERPOLATION_MAX;var k=1.25e-10;var c=H.irr_npvsum(f,h);if(c>0){k*=c}if(j<=-100||j>10000000000){j=0}g=j+1;e=j;while(--d>0){j=g;m=H.npv(f,j,h,b);j=e;a=H.npv(f,j,h,b);if(j<-100||j>10000000000){return[H.ERROR_IRR,j]}if(Math.abs(a)<k){return[-1,j]}var l=(a-m)/(e-g);o=m-g*l;o/=-l;o=H.solve_infinity(o);g=e;e=o}return[H.ERROR_IRR2,j]};H.financecalc=function(n,p,j,s){var f=0;if(n===0){var o=s[H.FIN_PMT];var d=-s[H.FIN_PV]*s[H.FIN_I]/100;var m=s[H.FIN_FV]*s[H.FIN_I]/100;var k=s[H.FIN_FV];if(o<0){o=-o;d=-d;m=-m;k=-k}f=f||s[H.FIN_I]<=-100;if(k===0){f=f||(o<=d);f=f||H.feq10(o,d)}}else{if(n==2){f=f||s[H.FIN_I]<=-100}else{if(n==3){f=f||s[H.FIN_I]<=-100;f=f||s[H.FIN_N]===0}else{if(n==4){f=f||s[H.FIN_I]<=-100}}}}if(f){return H.ERROR_INTEREST}var r;var g;var l;var c;var a;var q=s[n];var b=H.INTERPOLATION_MAX;var e=1.25e-10;var h=0;if(n!=H.FIN_PV){h+=Math.abs(s[H.FIN_PV])}if(n!=H.FIN_PMT){h+=Math.abs(s[H.FIN_PMT])}if(n!=H.FIN_N&&n!=H.FIN_PMT){h+=Math.abs(s[H.FIN_N]*s[H.FIN_PMT])}if(n!=H.FIN_FV){h+=Math.abs(s[H.FIN_FV])}if(h>0){e*=h}if(n==H.FIN_N||n==H.FIN_I||h<=0){a=1}else{a=h}l=0;while(--b>=0){c=a;a=l;s[n]=c;if(s[H.FIN_I]<=-100){break}r=H.calcNPV(n===0,s[H.FIN_N],s[H.FIN_I],s[H.FIN_PV],s[H.FIN_PMT],s[H.FIN_FV],p,j);s[n]=a;if(s[H.FIN_I]<=-100){break}g=H.calcNPV(n===0,s[H.FIN_N],s[H.FIN_I],s[H.FIN_PV],s[H.FIN_PMT],s[H.FIN_FV],p,j);if(Math.abs(g)<e){if(n===0){if((a-Math.floor(a))>0.003){s[n]=Math.floor(s[n])+1}else{s[n]=Math.floor(s[n])}}return -1}var i=(g-r)/(a-c);l=r-c*i;l/=-i;l=H.solve_infinity(l)}s[n]=q;return H.ERROR_INTEREST};H.bond_yield=function(j,g,a,i){var c;if(g===null){return[H.ERROR_DATE,0]}if(a===null){return[H.ERROR_DATE,0]}if(i<=0){return[H.ERROR_INTEREST,0]}var m;var b;var n;var f;var e;var d=H.INTERPOLATION_MAX;var h=1.25e-10*Math.abs(i);f=0;e=f+1;while(--d>0){var l=H.bond_price(f,j,g,a);if(!l){return[H.ERROR_INTEREST,0]}else{if(l[0]>=0){return[l[0],0]}}m=l[1]-i;l=H.bond_price(e,j,g,a);if(!l){return[H.ERROR_INTEREST,0]}else{if(l[0]>=0){return[l[0],0]}}b=l[1]-i;if(f<-100||f>10000000000){return[H.ERROR_INTEREST,0]}if(Math.abs(b)<h){c=e;break}var k=(b-m)/(e-f);n=m-f*k;n/=-k;n=H.solve_infinity(n);f=e;e=n}return[-1,c]};H.depreciation_sl=function(f,d,c,b){var e=0;var a=f-d;if(b<0||b!=Math.floor(b)||c<=0||c>Math.pow(10,10)){return[H.ERROR_INTEREST,0,0]}if(b>c){return[-1,0,0]}while(--b>=0){e=(f-d)/c;if(H.badnumber(e)){return[H.ERROR_DIVZERO,0,0]}a-=e}return[-1,e,a]};H.depreciation_soyd=function(h,f,e,d){var g=0;var c=h-f;if(d<0||d!=Math.floor(d)||e<=0||e>Math.pow(10,10)){return[H.ERROR_INTEREST,0,0]}if(d>e){return[-1,0,0]}var b=0;var a=e*(e+1)/2;while(--d>=0){g=(h-f)*(e-(++b)+1)/a;if(H.badnumber(g)){return[H.ERROR_DIVZERO,0,0]}c-=g}return[-1,g,c]};H.depreciation_db=function(h,f,e,c,a){var g=0;var b=h-f;if(c<0||c!=Math.floor(c)||e<=0||e>Math.pow(10,10)){return[H.ERROR_INTEREST,0,0]}if(c>e||b<0){return[-1,0,0]}var d=0;while(--c>=0){if(++d<e){g=(b+f)*a/e}else{g=b}if(H.badnumber(g)){return[H.ERROR_DIVZERO,0,0]}b-=g;if(b<0){g+=b;b=0}}return[-1,g,b]};H.amortization=function(a,f,h,n,g,d,c){if(a<=0||a!=Math.floor(a)||h<=-1){return[H.ERROR_INTEREST,0,0]}var b=0;var l=0;for(var k=1;k<=a;++k){var m=H.cl5_round(-n*h,d);if(k==1&&c&&f<=0){m=0}var j=g-m;b+=m;l+=j;n+=j}return[-1,b,l]};H.degrees_to_radians=function(a){return a*Math.PI/180};H.radians=function(b,a){if(a==H.TRIGO_DEG){b=H.degrees_to_radians(b)}else{if(a==H.TRIGO_GRAD){b*=Math.PI/200}}return b};H.radians_to_degrees=function(a){return a*180/Math.PI};H.to_angle_mode=function(b,a){if(a==H.TRIGO_DEG){b=H.radians_to_degrees(b)}else{if(a==H.TRIGO_GRAD){b*=200/Math.PI}}return b};H.hour_to_hms=function(a){var f=H.binary_sgn(a);var b=Math.floor(Math.abs(a));var d=Math.abs(a)-b;d*=60;var c=Math.floor(d+1e-8);d=Math.max(d-c,0);var e=d*60;return f*(b+c/100+e/10000)};H.hms_to_hour=function(a){var f=H.binary_sgn(a);var b=Math.floor(Math.abs(a));var d=Math.abs(a)-b;d*=100;var c=Math.floor(d+1e-7);d=Math.max(d-c,0);var e=d*100;return f*(b+c/60+e/3600)};H.asinh=function(a){return Math.log(a+Math.sqrt(a*a+1))};H.acosh=function(a){return Math.log(a+Math.sqrt(a*a-1))};H.atanh=function(a){return 0.5*Math.log((1+a)/(1-a))};H.sinh=function(a){return(Math.exp(a)-Math.exp(-a))/2};H.cosh=function(a){return(Math.exp(a)+Math.exp(-a))/2};H.tanh=function(a){return(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))};H.feq=function(d,c,e){if(d===undefined||d===null||c===undefined||c===null||H.badnumber(d)||H.badnumber(c)){console.log("feq: bad number");return false}if(e===undefined||e===null){e=Math.pow(10,-10)}return Math.abs(d-c)<=e};H.arithmetic_round=function(g,f,d){if(g===0){return g}else{if(f===0&&d===0){return g}}var i=Math.floor(Math.log(Math.abs(g))/Math.log(10));var c=i;if(f!==0){c=Math.floor(Math.log(Math.abs(f))/Math.log(10))}if(d!==0){c=Math.min(c,Math.floor(Math.log(Math.abs(f))/Math.log(10)))}if(c<-88){return g}var h=Math.pow(10,11-c);var e=Math.round(Math.abs(g)*h)/h*H.binary_sgn(g);return e};H.feq10=function(e,d){if(e===undefined||e===null||d===undefined||d===null||H.badnumber(e)||H.badnumber(d)){return false}var f=0;if(e===0||d===0){f=Math.pow(10,-100)}else{var c=Math.floor(Math.max(Math.log(Math.abs(d))/Math.log(10),Math.log(Math.abs(e))/Math.log(10)))+1;if(H.badnumber(c)){f=Math.pow(10,-100)}else{f=Math.pow(10,c-10)}}return H.feq(e,d,f)};H.feq10_0=function(d,c){var e=0;if((d<=1&&d>=-1)||(c<=1&&c>=-1)){e=2}return H.feq10(e+d,e+c)};H.polar=function(a,d){var c=Math.atan2(d,a);var b=Math.sqrt(a*a+d*d);return[b,c]};H.orthogonal=function(a,b){return[a*Math.cos(b),a*Math.sin(b)]};H.fatorial=function(b){var a=1;while(b>1&&!H.badnumber(a)){a*=b;--b}return a};H.gamma=function(d){if(d<0.5){return Math.PI/(Math.sin(Math.PI*d)*H.gamma(1-d))}d=d-1;var a=H.gamma.p[0];for(var c=1;c<(H.gamma.g+2);++c){a+=H.gamma.p[c]/(d+c)}var b=d+H.gamma.g+0.5;return Math.sqrt(2*Math.PI)*Math.pow(b,(d+0.5))*Math.exp(-b)*a};H.gamma.g=7;H.gamma.p=[0.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-0.13857109526572012,0.000009984369578019572,1.5056327351493116e-7];H.fatorial_gamma=function(a){if(a>=0&&Math.floor(a)==a){return H.fatorial(a)}return H.gamma(a+1)};H.permutations=function(d,c){return H.fatorial(d)/H.fatorial(d-c)};H.combinations=function(d,c){return H.permutations(d,c)/H.fatorial(c)};H.stddev=function(b){if(b[H.STAT_N]<=1||(b[H.STAT_N]*b[H.STAT_X2]-b[H.STAT_X]*b[H.STAT_X])<0||(b[H.STAT_N]*b[H.STAT_Y2]-b[H.STAT_Y]*b[H.STAT_Y])<0){return[0]}var a=Math.pow((b[H.STAT_N]*b[H.STAT_X2]-b[H.STAT_X]*b[H.STAT_X])/(b[H.STAT_N]*(b[H.STAT_N]-1)),0.5);var c=Math.pow((b[H.STAT_N]*b[H.STAT_Y2]-b[H.STAT_Y]*b[H.STAT_Y])/(b[H.STAT_N]*(b[H.STAT_N]-1)),0.5);return[1,a,c]};H.linear_regression=function(d){if(d[H.STAT_N]<=1){console.log("LR err type 1");return[0]}if(d[H.STAT_N]<=1){console.log("LR err type 2");return[0]}if(H.feq(d[H.STAT_X2]-d[H.STAT_X]*d[H.STAT_X]/d[H.STAT_N],0)){console.log("LR err type 3");return[0]}var c=d[H.STAT_X]/d[H.STAT_N];var b=d[H.STAT_Y]/d[H.STAT_N];var e=d[H.STAT_XY]-d[H.STAT_X]*d[H.STAT_Y]/d[H.STAT_N];e/=d[H.STAT_X2]-d[H.STAT_X]*d[H.STAT_X]/d[H.STAT_N];if(H.badnumber(e)){console.log("LR err type 4");return[0]}var a=b-e*c;return[1,a,e]};H.stat_kr=function(j,f,b){var h=H.linear_regression(j);if(!h[0]){console.log("statkr error 1");return[0]}var e=h[1];var d=h[2];if(f){if(H.feq((j[H.STAT_N]*j[H.STAT_X2]-j[H.STAT_X]*j[H.STAT_X]),0)){console.log("statkr error 2");return[0]}}else{if(H.feq((j[H.STAT_N]*j[H.STAT_Y2]-j[H.STAT_Y]*j[H.STAT_Y]),0)){console.log("statkr error 3");return[0]}}var m=j[H.STAT_XY]-j[H.STAT_X]*j[H.STAT_Y]/j[H.STAT_N];var l=j[H.STAT_X2]-j[H.STAT_X]*j[H.STAT_X]/j[H.STAT_N];var k=j[H.STAT_Y2]-j[H.STAT_Y]*j[H.STAT_Y]/j[H.STAT_N];if(l===0||k===0){console.log("statkr error 5");return[0]}if((l*k)<0){console.log("statkr error 6");return[0]}var g=Math.sqrt(l*k);if(H.badnumber(g)||g<0){console.log("statkr error 6");return[0]}var a=m/g;var i;if(f){if(d===0){console.log("statkr error 7");return[0]}i=(b-e)/d}else{i=e+d*b}if(H.badnumber(i)){console.log("statkr error 8");return[0]}return[1,i,a]};H.stat_accumulate=function(c,b,a,d){b[H.STAT_N]+=c;b[H.STAT_X]+=c*a;b[H.STAT_X2]+=c*a*a;b[H.STAT_Y]+=c*d;b[H.STAT_Y2]+=c*d*d;b[H.STAT_XY]+=c*a*d};H.stat_avg=function(b){if(b[H.STAT_N]===0){return[0]}var a=b[H.STAT_X]/b[H.STAT_N];var c=b[H.STAT_Y]/b[H.STAT_N];return[1,a,c]};H.stat_avgw=function(a){if(a[H.STAT_X]===0){return[0]}return[1,a[H.STAT_XY]/a[H.STAT_X]]};H.word_bit=function(b,c){var a=0;if(c>=32){a=(b.h>>>(c-32))&1}else{a=(b.r>>>c)&1}return a};H.word_Set_bit=function(b,c,a){if(c>=32){if(a){b.h=b.h|(1<<(c-32))}else{b.h=b.h&(~(1<<(c-32)))}}else{if(a){b.r=b.r|(1<<c)}else{b.r=b.r&(~(1<<c))}}};H.cast_wordsize=function(c,b){var d=0;var a=0;if(b>32){d=4294967295;a=4294967295>>>(64-b)}else{d=4294967295>>>(32-b)}c.r=c.r&d;c.h=c.h&a};H.spagint_to_digit=function(a,e,b,c){var d=1;var f=0;while(c>0&&e<a.length){if(a[e]){f+=d}++e;--c;d*=2}return f.toString(b)};H.sdecimal_mult2=function(d){var c=0;var b="";for(var a=d.length-1;a>=0;--a){var e=parseInt(d.charAt(a),10);e=e*2+c;c=Math.floor(e/10);b=(e%10).toString(10)+b}if(c){b=c.toString(10)+b}return b};H.binary_to_decimal=function(c){var e="0";for(var d=0;d<c.length;++d){e=H.sdecimal_mult2(e);if(c.charAt(d)!=="0"){var a=parseInt(e.charAt(e.length-1),10);a+=1;e=e.substring(0,e.length-1)+a.toString(10)}}return e};H.integer_to_string=function(k,l,f,j,c){var b="";var g="";var d="";var m=4;if(!j){j=10}H.cast_wordsize(k,f);var n=H.make_spaghetti([k.h,k.r],f,false);if(H.spagint_sgn(n,l)<0){g="-";H.spagint_inv(n,l)}if(j===2){d+="0b";m=1}else{if(j===8){d+="0";m=3}else{if(j===16){d+="0x";m=4}}}var a=j;if(j===10){a=2;m=1}var e="";for(var i=0;i<f;i+=m){var h=H.spagint_to_digit(n,i,a,m);e=h+e;if(h!=="0"){b=e+b;e=""}}if(j===10){b=H.binary_to_decimal(b)}if(b.length<=0){b="0"}if(c){d=""}return g+d+b};H.parse_digit=function(b,a){var c=parseInt(b,a);if(!c){c=0}return c};H.string_to_integer=function(l,i,f,h){var d=1;var b=H.spagint_make_zero(f);var e=H.spagint_make_one(f);l=""+l;l=H.trim(l);l.toLowerCase();if(l.charAt(0)==="-"){if(i>0){d=-1}l=l.substring(1)}if(!h){h=10;if(l.charAt(0)==="0"){l=l.substring(1);if(l.charAt(0)==="x"){h=16;l=l.substring(1)}else{if(l.charAt(0)==="b"){h=2;l=l.substring(1)}else{h=8}}}}var a=H.make_spaghetti([h],f,false);while(l.length>0){var g=H.parse_digit(l.charAt(l.length-1),h);var k=H.spagint_make_zero(f);H.spagint_multiply(H.make_spaghetti([g],f,false),e,k);H.spagint_u_s_sum(b,k);var c=H.spagint_copy(e);e=H.spagint_make_zero(f);H.spagint_multiply(a,c,e);l=l.substring(0,l.length-1)}if(d<1){H.spagint_inv(b,i)}var j=H.undo_spaghetti(b,f,false);H.cast_wordsize(j,f);return j};H.make_spaghetti=function(f,d,j){var l=[];var b,e;for(b=0;b<(j?2:1);++b){var g=f.length-b*2-1;var c=0;var i=0;if(g>=0){i=f[g];if(g>=1){c=f[g-1]}}for(e=0;e<d;++e){var h=0;var k=1;k=k<<(e%32);if(e>=32){h=(c&k)?1:0}else{h=(i&k)?1:0}l.push(h)}}return l};H.undo_spaghetti=function(i,d,g){var b=g?(d*2):d;var c=[{r:0,h:0,i:0},{r:0,h:0,i:0}];for(var f=0;f<b;++f){var a=Math.floor(f/d);var e=f%d;if(i[f]){var h=1<<(e%32);if(e>=32){c[a].h|=h}else{c[a].r|=h}}}if(!g){c=c[0]}return c};H.spagint_shr=function(b){for(var a=0;a<(b.length-1);++a){b[a]=b[a+1]}b[b.length-1]=0};H.spagint_shl=function(b){for(var a=b.length-1;a>0;--a){b[a]=b[a-1]}b[0]=0};H.spagint_highbit=function(b){for(var a=b.length-1;a>=0;--a){if(b[a]){return a}}return -1};H.spagint_is_zero=function(c,b){if(H.spagint_highbit(c)<0){return true}else{if(b==1){for(var a=0;a<c.length;++a){if(!c[a]){return false}}return true}}return false};H.spagint_sgn=function(b,a){if(a==2||a==1){if(b[b.length-1]){return -1}}return 1};H.spagint_copy=function(f,c){if(!c){c=f.length}var e=[];for(var d=0;d<c;++d){var a=0;if(d<f.length){a=f[d]}e[d]=a}return e};H.spagint_extend=function(c,b){var a=H.spagint_copy(c,c.length+1);if(b>0){a[a.length-1]=c[c.length-1]}return a};H.spagint_u_s_sum=function(h,d){var e,g,f,c,b;g=0;c=0;for(e=0;e<h.length&&(g||e<d.length);++e){var a=(h[e]?1:0)+(g?1:0)+(d[e]?1:0);c=g;g=(a>1)?1:0;h[e]=a%2}f=!!g;b=(g!==c);return{result:h,carry:f,unsigned_overflow:f,signed_overflow:b}};H.spagint_cpl1_to_cpl2=function(a){if(a[a.length-1]){H.spagint_u_s_sum(a,H.spagint_make_one(a.length))}return a};H.spagint_cpl2_to_cpl1=function(a){var b=false;if(a[a.length-1]){H.spagint_u_s_sum(a,H.spagint_make_minus_one(2,a.length));b=!a[a.length-1]}return{result:a,overflow:b}};H.spagint_eq=function(d,c){for(var b=(Math.max(d.length,c.length)-1);b>=0;--b){var e=(b<d.length)?d[b]:0;var a=(b<c.length)?c[b]:0;if(e<a){return false}else{if(e>a){return false}}}return true};H.spagint_ge=function(d,c){for(var b=(Math.max(d.length,c.length)-1);b>=0;--b){var e=(b<d.length)?d[b]:0;var a=(b<c.length)?c[b]:0;if(e<a){return false}else{if(e>a){return true}}}return true};H.spagint_abs=function(b,c){var d=false;if(c<=0||H.spagint_sgn(b,c)>0){return{result:b,overflow:d}}if(c!==1){H.spagint_u_s_sum(b,H.spagint_make_minus_one(2,b.length));d=!b[b.length-1]}for(var a=0;a<b.length;++a){b[a]=b[a]?0:1}return{result:b,overflow:d}};H.spagint_inv=function(c,d){if(H.spagint_is_zero(c)){return{result:c,overflow:false}}var e=false;if(d<=0){console.log("cannot invert int unsigned");return{result:c,overflow:e}}for(var b=0;b<c.length;++b){c[b]=c[b]?0:1}if(d!==1){var a=c[c.length-1];H.spagint_u_s_sum(c,H.spagint_make_one(c.length));e=(a!==c[c.length-1])}return{result:c,overflow:e}};H.spagint_neg=function(b,a){if(H.spagint_sgn(b,a)<0){return b}H.spagint_inv(b,a);return b};H.spagint_cast_sign=function(e,d,a,f){if(d>0){var b=e.length-1;var c=a*(f?2:1)-1;e[c]=e[b]}};H.spagint_divide=function(f,e,k){f=H.spagint_copy(f,k.length+1);e=H.spagint_copy(e,k.length+1);var j=H.spagint_copy(e);H.spagint_inv(j,2);var i=H.spagint_make_one(f.length);while(H.spagint_ge(f,e)&&!H.spagint_is_zero(f)&&!H.spagint_is_zero(e)){var d=H.spagint_highbit(f)-H.spagint_highbit(e)-1;if(d<=0){H.spagint_u_s_sum(k,i);H.spagint_u_s_sum(f,j)}else{var h=H.spagint_make_power2(f.length,d);var g=H.spagint_make_zero(f.length);H.spagint_multiply(e,h,g);H.spagint_inv(g,2);H.spagint_u_s_sum(k,h);H.spagint_u_s_sum(f,g)}}return H.spagint_copy(f,k.length)};H.integer_divide=function(l,k,n,h,q){l=H.make_spaghetti(l,h,q);k=H.make_spaghetti(k,h,false);if(H.spagint_is_zero(k)){return{result:[H.undo_spaghetti(H.spagint_make_zero(h),h,false),H.undo_spaghetti(H.spagint_make_zero(h),h,false)],carry:false,overflow:true}}var e=false;var g=H.spagint_sgn(l,n)*H.spagint_sgn(k,n);var o=H.spagint_sgn(l,n);l=H.spagint_extend(l,n);k=H.spagint_extend(k,n);H.spagint_abs(l,n);H.spagint_abs(k,n);k=H.spagint_copy(k,l.length);var j=H.spagint_make_zero(l.length);l=H.spagint_divide(l,k,j);var f=H.spagint_highbit(j);if(n<=0){e=f>=h}else{if(n==1){e=f>=(h-1)}else{e=(f>=(h-1)&&(g>=0||!H.spagint_is_MININT_2(j,h)))}}if(g<0){H.spagint_neg(j,n)}if(o<0){H.spagint_neg(l,n)}if(e){H.spagint_cast_sign(j,n,h,false)}var p=H.undo_spaghetti(j,h,false);var m=!H.spagint_is_zero(l,0);var d=H.undo_spaghetti(l,h,false);var i=[p,d];return{result:i,overflow:e,carry:m}};H.spagint_make_zero=function(a){var c=[];for(var b=0;b<a;++b){c[b]=0}return c};H.spagint_make_one=function(a){var b=H.spagint_make_zero(a);b[0]=1;return b};H.spagint_make_power2=function(a,c){var b=H.spagint_make_zero(a);b[c]=1;return b};H.spagint_make_minus_one=function(c,a){var b=H.spagint_make_one(a);H.spagint_inv(b,c);return b};H.spagint_make_MIN_INT_2=function(a){var b=H.spagint_make_zero(a);b[b.length-1]=1;return b};H.spagint_make_MAX_INT_2=function(a){var b=H.spagint_make_minus_one(2,a);b[b.length-1]=0;return b};H.spagint_is_MININT_2=function(c,a){var b=H.spagint_make_MIN_INT_2(a);return H.spagint_eq(c,b)};H.spagint_multiply=function(e,d,g){e=H.spagint_copy(e,g.length);d=H.spagint_copy(d,g.length);while(!H.spagint_is_zero(e,0)){if(!e[0]){H.spagint_shr(e);H.spagint_shl(d)}else{var f=H.spagint_u_s_sum(g,d);e[0]=0}}return g};H.integer_multiply=function(k,j,l,g,n){k=H.make_spaghetti(k,g,false);j=H.make_spaghetti(j,g,false);var i=H.spagint_make_zero(g*2);var f=H.spagint_sgn(k,l)*H.spagint_sgn(j,l);var d=false;k=H.spagint_extend(k,l);j=H.spagint_extend(j,l);H.spagint_abs(k,l);H.spagint_abs(j,l);var h=H.spagint_multiply(k,j,i);if(!n){var e=H.spagint_highbit(i);if(l<=0){d=e>=g}else{if(l==1){d=e>=(g-1)}else{d=(e>=(g-1)&&(f>=0||!H.spagint_is_MININT_2(i,g)))}}}if(f<0){H.spagint_neg(i,l)}if(d){H.spagint_cast_sign(i,l,g,n)}var m=H.undo_spaghetti(i,g,n);return{result:m,overflow:d,carry:false}};H.integer_plus=function(f,d,i,e){f=H.make_spaghetti(f,e,false);d=H.make_spaghetti(d,e,false);var k=H.spagint_make_zero(e);var j=false;if(i===1){f=H.spagint_cpl1_to_cpl2(f,e);d=H.spagint_cpl1_to_cpl2(d,e)}H.spagint_u_s_sum(k,f);var h=H.spagint_u_s_sum(k,d);if(i<=0){j=h.unsigned_overflow}else{j=h.signed_overflow}if(i===1){if(H.spagint_cpl2_to_cpl1(k).overflow){j=true}}if(j){H.spagint_cast_sign(k,i,e,false)}var g=H.undo_spaghetti(k,e,false);return{result:g,overflow:j,carry:h.carry}};H.integer_minus=function(k,j,l,f){var e=f;if(l<=0){e+=1}k=H.make_spaghetti(k,e,false);j=H.make_spaghetti(j,e,false);var h=H.spagint_make_zero(e);var d=false;var i=false;if(l===1){k=H.spagint_cpl1_to_cpl2(k,e);j=H.spagint_cpl1_to_cpl2(j,e)}i=!H.spagint_ge(k,j);if(H.spagint_inv(j,2).overflow){d=true}H.spagint_u_s_sum(h,k);var g=H.spagint_u_s_sum(h,j);d=d||g.signed_overflow;if(l<=0){if(H.spagint_sgn(h)<0){d=true}}if(l===1){if(H.spagint_cpl2_to_cpl1(h).overflow){d=true}}if(d){H.spagint_cast_sign(h,l,f,false)}var m=H.undo_spaghetti(h,f,false);return{result:m,overflow:d,carry:i}};H.integer_sqrt=function(h,i,g){h=H.make_spaghetti(h,g,false);var f=g;if(H.spagint_sgn(h,i)<0){return{result:H.undo_spaghetti(H.spagint_make_zero(g),g,false),carry:false,overflow:true}}if(H.spagint_is_zero(h)){return{result:H.undo_spaghetti(H.spagint_make_zero(g),g,false),carry:false,overflow:false}}if(f<4){f=4;h=H.spagint_copy(h,4)}var e=H.spagint_highbit(h);var k=H.spagint_make_power2(h.length,1);var d=H.spagint_make_power2(h.length,1+Math.floor(e/2));var b=H.spagint_make_zero(h.length);H.spagint_divide(h,d,b);H.spagint_u_s_sum(b,d);H.spagint_shr(b);while(!H.spagint_ge(b,d)){d=b;b=H.spagint_make_zero(h.length);H.spagint_divide(h,d,b);H.spagint_u_s_sum(b,d);H.spagint_shr(b)}var c=H.spagint_make_zero(h.length);H.spagint_multiply(d,d,c);var j=!H.spagint_ge(c,h);return{result:H.undo_spaghetti(d,g,false),carry:j,overflow:false}};H.integer_inv=function(c,e,b){var g=false;var f=e;if(e===0){f=2;g=true}c=H.make_spaghetti(c,b,false);var d=H.spagint_inv(c,f,b);c=H.undo_spaghetti(d.result,b,false);return{result:c,overflow:(g||d.overflow)}};H.integer_abs=function(c,e,b){var g=false;var f=e;c=H.make_spaghetti(c,b,false);var d=H.spagint_abs(c,f,b);c=H.undo_spaghetti(d.result,b,false);return{result:c,overflow:(g||d.overflow)}};H.integer_eq=function(e,c,f,d){return((e.r===c.r)&&(e.h===c.h))};H.integer_lt=function(e,c,i,d){e=[e.h,e.r];c=[c.h,c.r];e=H.make_spaghetti(e,d,false);c=H.make_spaghetti(c,d,false);var g=H.spagint_sgn(e,i);var f=H.spagint_sgn(c,i);var h=false;if(g>f){h=false}else{if(g<f){h=true}else{h=!H.spagint_ge(e,c)}}return h};H.integer_le=function(e,c,f,d){return H.integer_eq(e,c,f,d)||H.integer_lt(e,c,f,d)};H.Prng=function(a){if(a===undefined){a=1}while(Math.abs(a)>2147483648){a/=1.987654321}while(Math.abs(a)<1073741824){a*=1.9123456789}this.N=624;this.M=397;this.MMA=2567483615;this.UMA=2147483648;this.LMA=2147483647;this.mt=[];this.mti=this.N+1;this.init(a)};H.Prng.prototype.init=function(a){this.mt[0]=a>>>0;for(this.mti=1;this.mti<this.N;this.mti++){var b=this.mt[this.mti-1]^(this.mt[this.mti-1]>>>30);this.mt[this.mti]=(((((b&4294901760)>>>16)*1812433253)<<16)+(b&65535)*1812433253)+this.mti;this.mt[this.mti]>>>=0}};H.Prng.prototype.gen32=function(){var c;var b=[0,this.MMA];if(this.mti>=this.N){var a;if(this.mti===this.N+1){this.init(5489)}for(a=0;a<this.N-this.M;a++){c=(this.mt[a]&this.UMA)|(this.mt[a+1]&this.LMA);this.mt[a]=this.mt[a+this.M]^(c>>>1)^b[c&1]}for(;a<this.N-1;a++){c=(this.mt[a]&this.UMA)|(this.mt[a+1]&this.LMA);this.mt[a]=this.mt[a+(this.M-this.N)]^(c>>>1)^b[c&1]}c=(this.mt[this.N-1]&this.UMA)|(this.mt[0]&this.LMA);this.mt[this.N-1]=this.mt[this.M-1]^(c>>>1)^b[c&1];this.mti=0}c=this.mt[this.mti++];c^=(c>>>11);c^=(c<<7)&2636928640;c^=(c<<15)&4022730752;c^=(c>>>18);return c>>>0};H.Prng.prototype.random=function(){var d=this.gen32()>>>5;var c=this.gen32()>>>6;return(d*67108864+c)*(1/9007199254740992)};H.sve=9.6;H.kve="371b2d438ae7eb2337eee09c83b8f635";"use strict";function Hp12c_pgrm(){this.constructor()}Hp12c_pgrm.prototype.constructor=function(){if(H.type==="12c"||H.type==="12c-platinum"){throw"Pgrm constructor not appropriate to 12c"}this.exec_special=[];this.exec_special[H.GTO]=[2,1,this.p_exec_gto];this.exec_special[H.GSB]=[2,1,this.p_exec_gosub];this.exec_special[H.GG*100+H.GSB]=[2,0,this.p_exec_rtn];this.exec_special[H.dispatcher.KEY_RS]=[1,0,this.p_exec_rs];this.label_count=0;this.type_special=[];var a=this.type_special;a[H.GG*100+H.dispatcher.KEY_RS]=this.p_type_pr;a[H.dispatcher.KEY_SST]=this.p_type_sst;a[H.GG*100+H.dispatcher.KEY_SST]=this.p_type_bst;a[H.dispatcher.KEY_BACKSPACE]=this.p_type_del;a[H.FF*100+H.dispatcher.KEY_RDOWN]=this.p_type_clear_pgrm;a[H.GTO*100+H.dispatcher.KEY_DECIMAL]=this.p_type_gto_move_begin;a[H.GTO]=this.p_type_gto_begin;a[H.GSB]=this.p_type_gosub_begin;a[H.LBL]=this.p_type_label_begin;if(H.type==="11c"||H.type==="15c"){a[H.GG*100+H.RCL]=this.p_type_mem_info;a[H.FF*100+H.RCL]=this.p_type_user;this.label_count=15}else{if(H.type==="16c"){a[H.FF*100+0]=this.p_type_mem_info;this.label_count=16}}for(var b=0;b<=9;++b){a[H.GTO_MOVE*100+b]=this.p_type_gto_move_n;a[H.GTO*100+b]=this.p_type_gto_n;a[H.GSB*100+b]=this.p_type_gosub_n;a[H.LBL*100+b]=this.p_type_label_n}for(b=11;b<=this.label_count;++b){a[H.GTO*100+b]=this.p_type_gto_n;a[H.GSB*100+b]=this.p_type_gosub_n;a[H.LBL*100+b]=this.p_type_label_n}a[H.GTO*100+H.KEY_INDEX]=this.p_type_gto_n;a[H.GSB*100+H.KEY_INDEX]=this.p_type_gosub_n;this.execution_delay=80};Hp12c_pgrm.p_encode_key=function(a,c){var b;if(c){b=H.zeropad(a.toFixed(0),H.ram_ADDR_SIZE)}else{b=H.zeropad(a.toFixed(0),H.INSTRUCTION_SIZE)}return b};Hp12c_pgrm.p_expand_opcode=function(b){var c=[];if(b>=H.INSTRUCTION_MAX){c=Hp12c_pgrm.p_expand_opcode(Math.floor(b/100))}c.push(b%H.INSTRUCTION_MAX);return c};Hp12c_pgrm.p_encode_modifier=function(a){if(a<=0){return""}var d="";var b=Hp12c_pgrm.p_expand_opcode(a);for(var c=0;c<b.length;++c){d+=Hp12c_pgrm.p_encode_key(b[c],0)+"."}return d};Hp12c_pgrm.p_encode_instruction=function(a,b,c){return Hp12c_pgrm.p_encode_modifier(a)+Hp12c_pgrm.p_encode_key(b,c)};Hp12c_pgrm.prototype.hex_opcode=function(a){var d=a.split(".");for(var c=0;c<d.length;++c){var b=parseInt(d[c],10);if(b>=11&&b<=16){d[c]=(b-1).toString(16)}}return d.join(".")};Hp12c_pgrm.prototype.p_del=function(a,c,g){var f=H.machine.ip;var b=H.machine.program_limit();if(f<=0||f>b){H.machine.ip=0;return}for(var d=f;d<b;++d){H.machine.ram[d]=H.machine.ram[d+1]}H.machine.ram[b]=H.STOP_INSTRUCTION;--H.machine.ip;--H.machine.program_size};Hp12c_pgrm.prototype.p_poke=function(a,b,d){if((H.machine.ip+1)>=H.ram_MAX){H.machine.display_error(H.ERROR_IP);return false}if(H.machine.program_size>=H.ram_MAX){H.machine.display_error(H.ERROR_IP);return false}++H.machine.ip;++H.machine.program_size;for(var c=H.ram_MAX-1;c>H.machine.ip;--c){H.machine.ram[c]=H.machine.ram[c-1]}H.machine.ram[H.machine.ip]=Hp12c_pgrm.p_encode_instruction(a,b,d);return true};Hp12c_pgrm.prototype.p_sched=function(){if(H.machine.program_mode>=H.RUNNING){H.machine.display_pgrm();var b=this;window.setTimeout(function(){b.p_execute()},this.execution_delay)}};Hp12c_pgrm.prototype.p_gto=function(b){var c=true;var a=b;if((b>=0&&b<=9)||(b>=11&&b<=this.label_count)){}else{if(b==H.KEY_INDEX){if(H.machine.index>=0){a=Math.floor(H.machine.index);if(a>14){return false}if(a>=10){a+=1}}else{a=Math.floor(Math.abs(H.machine.index));c=false;if(a>H.machine.program_limit()){return false}}}else{window.console.log("Invalid GTO label/suffix");return true}}if(c){window.console.log("GTO to label "+a);a=this.find_label(a);if(!a){window.console.log("... no such label");return false}}window.console.log("GTO to ip "+a);H.machine.ip=a;return true};Hp12c_pgrm.prototype.p_exec_gto=function(a){H.machine.rst_modifier(1);if(!this.p_gto(a[1])){H.machine.display_error(H.ERROR_IP);this.stop();return}};Hp12c_pgrm.prototype.p_exec_gosub=function(b){if(H.machine.call_stack.length>=4){H.machine.display_error(H.ERROR_RTN);this.stop();return}var a=this.find_label_or_index(b[1]);if(!a){H.machine.display_error(H.ERROR_IP);this.stop();return}window.console.log("GSB label "+b[1]+" to "+a);this.push_stack(a)};Hp12c_pgrm.prototype.p_exec_rtn=function(a){this.pop_stack();window.console.log("RTN to "+H.machine.ip);if(H.machine.ip<=0){this.stop()}};Hp12c_pgrm.prototype.p_exec_rs=function(a){++H.machine.ip;this.stop();H.machine.rst_modifier(1)};Hp12c_pgrm.p_opcode_match=function(c,a,d){a=Hp12c_pgrm.p_expand_opcode(a);for(var b=0;b<d;++b){if(c[b]!=a[b]){return false}}return true};Hp12c_pgrm.prototype.p_exec_handle_special=function(g){var c=null;for(var e in this.exec_special){if(typeof e!=="object"){var b=this.exec_special[e][0];var a=this.exec_special[e][1];var d=this.exec_special[e][2];if(b!=g.length){continue}if(!Hp12c_pgrm.p_opcode_match(g,e,b-a)){continue}c=d;break}}if(c){c.call(this,g)}return !!c};Hp12c_pgrm.prototype.find_label=function(a){var c=Hp12c_pgrm.p_encode_instruction(H.LBL,a,0);for(var b=1;b<=H.machine.program_limit();++b){if(H.machine.ram[b]==c){return b}}return 0};Hp12c_pgrm.prototype.find_label_or_index=function(c){if(c===H.KEY_INDEX){if(H.machine.index>=0){var b=Math.floor(H.machine.index);if(b>14){return 0}if(b>=10){b+=1}return this.find_label(b)}else{var a=Math.floor(Math.abs(H.machine.index));if(a>H.machine.program_limit()){return 0}return a}}return this.find_label(c)};Hp12c_pgrm.prototype.clean_stack=function(){H.machine.call_stack=[]};Hp12c_pgrm.prototype.push_stack=function(a){H.machine.call_stack.push(H.machine.ip+1);H.machine.ip=a};Hp12c_pgrm.prototype.pop_stack=function(){if(H.machine.call_stack.length<=0){H.machine.ip=0;return false}var a=H.machine.call_stack[H.machine.call_stack.length-1];H.machine.call_stack.splice(H.machine.call_stack.length-1,1);if(a>H.machine.program_limit()){window.console.log("RTN to EOF, defaulting to 0");a=0}H.machine.ip=a;return true};Hp12c_pgrm.prototype.p_execute=function(){if(H.machine.program_mode<H.RUNNING){return}if(!H.keyboard.enabled()){this.p_sched();return}if(H.machine.ip>H.machine.program_limit()){H.machine.ip=0;if(H.type!=="12c"&&H.type!=="12c-platinum"){this.clean_stack()}this.stop();return}if(H.machine.ip<=0){H.machine.ip=1;H.machine.display_pgrm()}var a=H.machine.ram[H.machine.ip];if(H.type!=="12c"&&H.type!=="12c-platinum"){if(a==H.STOP_INSTRUCTION||a===""){H.machine.ip=0;this.stop();return}}var c=a.split(".");window.console.log("Executing "+a+" x="+H.machine.x);var b;for(b=0;b<c.length;++b){c[b]=parseInt(c[b],10)}if(!this.p_exec_handle_special(c)){for(b=0;b<c.length;++b){if(!H.dispatcher.dispatch_common(c[b])){window.console.log("Invalid opcode for exec: "+a)}}if(H.machine.program_mode>=H.RUNNING||!H.machine.error_in_display){++H.machine.ip}}if(H.machine.ip<=0){this.stop()}else{if(H.machine.program_mode==H.RUNNING_STEP){H.machine.program_mode=H.INTERACTIVE;H.machine.display_pgrm()}else{if(H.machine.program_mode==H.RUNNING){this.p_sched()}}}};Hp12c_pgrm.prototype.p_run_step=function(){H.machine.program_mode=H.RUNNING_STEP;if(H.machine.ip<=0){H.machine.ip=1}H.machine.display_pgrm();this.p_sched()};Hp12c_pgrm.prototype.p_run=function(){H.machine.program_mode=H.RUNNING;if(H.machine.ip<=0){if(H.type!=="12c"&&H.type!=="12c-platinum"){this.clean_stack()}H.machine.ip=1}H.machine.display_pgrm();this.p_sched()};Hp12c_pgrm.prototype.rs=function(){if(H.machine.program_mode==H.INTERACTIVE){H.machine.display_result_s(false,false);this.p_run()}else{this.stop()}H.machine.rst_modifier(1)};Hp12c_pgrm.prototype.p_type_pr=function(a){H.machine.rst_modifier(1);H.machine.program_mode=H.INTERACTIVE;H.machine.ip=0;H.machine.display_pgrm();H.machine.display_modifier();H.machine.display_result_s(false,false)};Hp12c_pgrm.prototype.p_type_sst=function(a){if(++H.machine.ip>H.machine.program_limit()){H.machine.ip=0}H.machine.rst_modifier(1);H.machine.display_program_opcode()};Hp12c_pgrm.prototype.p_type_bst=function(a){if(--H.machine.ip<0){H.machine.ip=H.machine.program_limit()}H.machine.rst_modifier(1);H.machine.display_program_opcode()};Hp12c_pgrm.prototype.p_type_del=function(a,b,c){this.p_del();H.machine.rst_modifier(1);H.machine.display_program_opcode()};Hp12c_pgrm.prototype.p_type_clear_pgrm=function(a){H.machine.clear_prog(1);H.machine.rst_modifier(1);H.machine.display_program_opcode()};Hp12c_pgrm.prototype.p_type_mem_info=function(a){H.machine.rst_modifier(1);H.machine.mem_info()};Hp12c_pgrm.prototype.p_type_user=function(a){H.machine.rst_modifier(1);H.machine.toggle_user()};Hp12c_pgrm.prototype.p_type_gto_move_n=function(a){H.machine.gtoxx=""+H.machine.gtoxx+a.toFixed(0);if(H.machine.gtoxx.length>=H.ram_ADDR_SIZE){var b=parseInt(H.machine.gtoxx,10);H.machine.gtoxx="";H.machine.rst_modifier(1);if(b>H.machine.program_limit()){H.machine.display_error(H.ERROR_IP);return}H.machine.ip=b}H.machine.display_program_opcode()};Hp12c_pgrm.prototype.p_type_gto_n=function(a){H.machine.rst_modifier(1);if(!this.p_poke(H.GTO,a,0)){return}H.machine.display_program_opcode()};Hp12c_pgrm.prototype.p_type_gosub_n=function(a){H.machine.rst_modifier(1);if(!this.p_poke(H.GSB,a,0)){return}H.machine.display_program_opcode()};Hp12c_pgrm.prototype.p_type_gosub_begin=function(a){H.machine.set_modifier(H.GSB,1);H.machine.display_program_opcode();return true};Hp12c_pgrm.prototype.p_type_label_n=function(a){H.machine.rst_modifier(1);if(!this.p_poke(H.LBL,a,0)){return}H.machine.display_program_opcode()};Hp12c_pgrm.prototype.p_type_label_begin=function(a){H.machine.set_modifier(H.LBL,1);H.machine.display_program_opcode();return true};Hp12c_pgrm.prototype.p_type_gto_move_begin=function(a){H.machine.set_modifier(H.GTO_MOVE,1);H.machine.display_program_opcode()};Hp12c_pgrm.prototype.p_type_gto_begin=function(a){H.machine.set_modifier(H.GTO,1);if(H.type==="12c"||H.type==="12c-platinum"){H.machine.gtoxx=""}H.machine.display_program_opcode();return true};Hp12c_pgrm.prototype.p_type_handle_special=function(a){var b=null;var c=H.machine.modifier*100+a;if(this.type_special[c]){this.type_special[c].call(this,a);return true}return false};Hp12c_pgrm.prototype.type=function(a){if(this.p_type_handle_special(a)){return}if(H.dispatcher.handle_modifier(a,1)){H.machine.display_program_opcode();return}var b=H.dispatcher.find_function(a,1,0);if(!b){window.console.log("pgrm typing: no handler for "+a);H.machine.rst_modifier(1);H.machine.display_program_opcode();return}if(!this.p_poke(H.machine.modifier,a,0)){H.machine.rst_modifier(1);return}H.machine.rst_modifier(1);H.machine.display_program_opcode()};Hp12c_pgrm.prototype.stop=function(){H.machine.program_mode=H.INTERACTIVE;if(H.machine.ip>H.machine.program_limit()){H.machine.ip=0}H.machine.display_pgrm();if(!H.machine.error_in_display){if(H.type==="16c"){H.machine.display_result_s(false,true)}else{H.machine.display_result()}}};Hp12c_pgrm.prototype.sst=function(){if(H.machine.program_mode==H.INTERACTIVE){this.p_run_step()}H.machine.rst_modifier(1)};Hp12c_pgrm.prototype.bst=function(){if(H.machine.ip>0){--H.machine.ip}H.machine.display_program_opcode();H.machine.cli("bst");window.setTimeout(function(){H.machine.prog_bst_after()},this.execution_delay);H.machine.rst_modifier(1)};Hp12c_pgrm.prototype.gto=function(a){if(!this.p_gto(a)){H.machine.display_error(H.ERROR_IP);return}if(H.type==="16c"){H.machine.display_result_s(false,true)}else{H.machine.display_result()}};Hp12c_pgrm.prototype.label=function(a){window.console.log("LBL "+a)};Hp12c_pgrm.prototype.gosub=function(b){var a=this.find_label_or_index(b);if(!a){H.machine.display_error(H.ERROR_IP);return}this.clean_stack();H.machine.ip=a;if(H.type==="16c"){H.machine.display_result_s(false,true)}else{H.machine.display_result()}this.p_run()};Hp12c_pgrm.prototype.user=function(b){var a=this.find_label(b);if(!a){H.machine.display_error(H.ERROR_IP);return}H.machine.display_result();this.clean_stack();H.machine.ip=a;window.console.log("USER: exec from ip "+H.machine.ip);this.p_run()};Hp12c_pgrm.prototype.rtn=function(a){H.machine.ip=0};"use strict";function Hp12c_storage(){}Hp12c_storage.prototype.instruction_table="0123456789_-abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";Hp12c_storage.prototype.addr_prefix="$";Hp12c_storage.prototype.compress_opcode=function(h){var b="";var a=h.split(".");for(var f=0;f<a.length;++f){var d=a[f];var c=d.length;var g=parseInt(d,10);if(c==H.INSTRUCTION_SIZE&&g>=0&&g<=50){b+=this.instruction_table.charAt(g)}else{if(c==H.ram_ADDR_SIZE){b+=this.addr_prefix;if(g<64){b+=this.instruction_table.charAt(g)}else{b+=this.instruction_table.charAt(Math.floor(g/64));b+=this.instruction_table.charAt(g%64)}}else{return this.compress_opcode(H.STOP_INSTRUCTION)}}}return b};Hp12c_storage.prototype.decompress_opcode=function(d){var f="";var i=[];var b;var a;var c=0;var g=0;var j=0;for(var h=0;h<d.length;++h){b=d.charAt(h);if(b==this.addr_prefix){if((i.length<1)||(g>0)){c=1;break}g=1;continue}a=this.instruction_table.indexOf(b);if(a<0){c=1;break}if(g){j=(j*64)+a;if(j>=Math.pow(10,H.ram_ADDR_SIZE)){c=1;break}if(j>=H.ram_MAX){c=1;break}if(g==1){i.push(H.zeropad(j,H.ram_ADDR_SIZE))}else{i[i.length-1]=H.zeropad(j,H.ram_ADDR_SIZE)}g+=1}else{if(a>49){c=1;break}i.push(H.zeropad(a,H.INSTRUCTION_SIZE))}}if(c){f=H.STOP_INSTRUCTION}else{if(i.length>3||i.length<1){f=H.STOP_INSTRUCTION}else{f=i.join(".")}}return f};Hp12c_storage.prototype.marshal_array=function(b,e){var c="A"+e;for(var d=0;d<b.length;++d){var f=b[d];if(e=="X"){f=this.compress_opcode(f)}c+="!"+f}return c};Hp12c_storage.prototype.unmarshal_array=function(f,h,c){if(c.length<2){return}var g=f[h];var e=c.charAt(1);c=c.slice(3);var b=c.split("!");for(var d=0;d<b.length&&d<g.length;++d){if(e=="N"){g[d]=parseFloat(b[d]);if(H.badnumber(g[d])){g[d]=0}}else{if(d>0){g[d]=this.decompress_opcode(b[d])}}}return};Hp12c_storage.prototype.save_memory2=function(d){var a=new Date();a.setTime(a.getTime()+7*24*60*60*1000);var e=d.nvname+"=";var c,b;for(c=0;c<d.nvN.length;++c){b=d.nvN[c];e+=b+":"+d[b]+" "}for(c=0;c<d.nvAN.length;++c){b=d.nvAN[c];e+=b+":"+this.marshal_array(d[b],"N")+" "}for(c=0;c<d.nvAX.length;++c){b=d.nvAX[c];e+=b+":"+this.marshal_array(d[b],"X")+" "}e+="; expires="+a.toGMTString()+"; path=/";return e};Hp12c_storage.prototype.save=function(){document.cookie=this.save_memory2(H.machine)};Hp12c_storage.prototype.get_memory=function(){return this.save_memory2(H.machine)};Hp12c_storage.prototype.recover_memory2=function(h,j){var c=j.split(";");for(var d=0;d<c.length;++d){var b=c[d].split("=");if(b.length!=2){continue}b[0]=H.trim(b[0]);b[1]=H.trim(b[1]);if(b[0]!=H.type_cookie){continue}var i=b[1].split(" ");for(var g=0;g<i.length;++g){var a=i[g].split(":");if(a.length==2&&h[a[0]]!==undefined){if(a[1].length>=2&&a[1].charAt(0)=="A"){this.unmarshal_array(h,a[0],a[1])}else{h[a[0]]=parseFloat(a[1]);if(H.badnumber(h[a[0]])){h[a[0]]=0}}}}}if(H.type==="12c"||H.type==="12c-platinum"){return}H.machine.program_size=1;for(g=1;g<H.ram_MAX;++g){if(H.machine.ram[g]!=H.STOP_INSTRUCTION){H.machine.program_size+=1}else{break}}};Hp12c_storage.prototype.load=function(){this.recover_memory2(H.machine,document.cookie)};Hp12c_storage.prototype.set_memory=function(a){this.recover_memory2(H.machine,a)};"use strict";function Close_hp12c(){if(!Close_hp12c.done){H.storage.save();Close_hp12c.done=1}}Close_hp12c.done=0;function Init_hp12c(){H.display=new Hp12c_display();H.keyboard=new Hp12c_keyboard();H.debug=new Hp12c_debug(function(a){return H.display.format_result_tuple(a)});H.machine=new Hp12c_machine();H.dispatcher=new Hp12c_dispatcher();H.pgrm=new Hp12c_pgrm();H.storage=new Hp12c_storage();H.machine.init();H.storage.load();H.machine.display_all();H.machine.sti("init");window.onunload=Close_hp12c;window.beforenunload=Close_hp12c;document.onunload=Close_hp12c;document.beforeunload=Close_hp12c}H.touch_display=true;